<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="https://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <!-- classpage -- >
    <!-- RD version: 0.42.0  -->
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />
  <meta name='description' content='  Class : OpenSSL::PKey::DSA  -   Ruby 2.7.4 ' />
  <meta content="2021-12-08 17:26:02 -0700" http-equiv="change-date" />
  <!-- rel_prefix  = '../..'  ENV['RDOC_FOR_WEBSITE']   = false-->
    
  <!-- rel_prefix = '../..'   asset_rel_prefix = '../..'  --> 
  <title>Class: OpenSSL::PKey::DSA (Ruby 2.7.4) </title>
  <link rel="stylesheet" href="../../css/associated.css" type="text/css" >
  <!-- link rel="stylesheet" href="../..css/obf.css"  -->
  <link rel="stylesheet" href="../../css/inuit.css" >
  <link rel="stylesheet" href="../../css/grid.inuit.css" >
  <link rel="stylesheet" href="../../css/2011.css" type="text/css" >
  <link rel="stylesheet" href="../../css/rdoc.css" type="text/css" >
    <link rel="stylesheet" href="../../css/carbon17.css" type="text/css" >


  <script src="../../js/jquery.js" type="text/javascript" charset="utf-8"></script>
  <script src="../../js/thickbox-compressed.js" type="text/javascript" charset="utf-8"></script>
  <script src="../../js/quicksearch.js" type="text/javascript" charset="utf-8"></script>
  <script src="../../js/rubydoc.js" type="text/javascript" charset="utf-8"></script> 


   
<script src="../../js/highlight.min.js"></script>
<script> 
  hljs.tabReplace = '  ';
  hljs.initHighlightingOnLoad();
  </script> 

  <style type='text/css'>

    #vulns-alert #vulns{
      background-color: #c33 ! important;
      width: 100%;
      text-align: center;
   }
   
   #vulns-alert #vulns a {
    color: #F99 ! important;
   }
 </style>

   <link rel="stylesheet" href="css/extra.css" type="text/css" >
  <script  src="/js/extra.js"  ></script>


</head>

<body id="top" class="class rdocstar">

<div id='actionbar' >
<div class='wrapper'>
  <ul class='grids g0'></ul>
</div>
<span id='vulns-alert'></span>
<!-- VERSION HEADER for 2.7.4 NOT FOUND -->
</div> <!-- end action bar -->
 <div class='wrapper'>
  
   <!-- carbon17 added here 2017-09-09 -->
 

   <div id="metadata">
    <div id="home-metadata">
      <div id="home-section" class="section">
        <h3 class="section-header">
          <a href="../../index.html">Home</a>
          <a href="../../index.html#classes">Classes</a>
          <a href="../../index.html#methods">Methods</a>
          
        </h3>
      </div>
    </div>

    <div id="file-metadata">
      <div id="file-list-section" class="section">
        <h3 class="section-header">In Files</h3>
        <div class="section-body">
          <ul id='file-metadata'>

          
          
          
          <li class='in-file'>openssl/ossl_pkey.c</li>      
            
          </ul>
        </div>
      </div>

      
    </div>

    <div id="class-metadata">
      
      <!-- Parent Class -->
      <div id="parent-class-section" class="section">
        <h3 class="section-header">Parent</h3>
        
        <p class="link"><a href="PKey.html">OpenSSL::PKey::PKey</a></p>
        
      </div>
      

      

      

      
      <!-- Method Quickref -->
      <div id="method-list-section" class="section">
        <h3 class="section-header">Methods</h3>
        <ul class="link-list">
          
          <li><a href="#method-c-generate">::generate</a></li>
          
          <li><a href="#method-c-new">::new</a></li>
          
          <li><a href="#method-i-export">#export</a></li>
          
          <li><a href="#method-i-initialize_copy">#initialize_copy</a></li>
          
          <li><a href="#method-i-params">#params</a></li>
          
          <li><a href="#method-i-private-3F">#private?</a></li>
          
          <li><a href="#method-i-public-3F">#public?</a></li>
          
          <li><a href="#method-i-public_key">#public_key</a></li>
          
          <li><a href="#method-i-set_key">#set_key</a></li>
          
          <li><a href="#method-i-set_pqg">#set_pqg</a></li>
          
          <li><a href="#method-i-syssign">#syssign</a></li>
          
          <li><a href="#method-i-sysverify">#sysverify</a></li>
          
          <li><a href="#method-i-to_der">#to_der</a></li>
          
          <li><a href="#method-i-to_pem">#to_pem</a></li>
          
          <li><a href="#method-i-to_s">#to_s</a></li>
          
          <li><a href="#method-i-to_text">#to_text</a></li>
          
        </ul>
      </div>
      

      
    </div>

    <div id="project-metadata">
      
      

      <div id="classindex-section" class="section project-section">
        <h3 class="section-header">Class/Module Index
          <span class="search-toggle"><img src="../../images/find.png"
            height="16" width="16" alt="[+]"
            title="show/hide quicksearch" /></span></h3>
        <form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
        <fieldset>
          <legend>Quicksearch</legend>
          <input type="text" name="quicksearch" value=""
            class="quicksearch-field" />
        </fieldset>
        </form>

        <ul class="link-list">
          
          
          
          <li><a href="../../IO.html">IO</a></li>
        
          
          
          <li><a href="../../IO/WaitReadable.html">IO::WaitReadable</a></li>
        
          
          
          <li><a href="../../IO/WaitWritable.html">IO::WaitWritable</a></li>
        
          
          
          <li><a href="../../Integer.html">Integer</a></li>
        
          
          
          <li><a href="../../OpenSSL.html">OpenSSL</a></li>
        
          
          
          <li><a href="../../OpenSSL/ASN1.html">OpenSSL::ASN1</a></li>
        
          
          
          <li><a href="../../OpenSSL/ASN1/ASN1Data.html">OpenSSL::ASN1::ASN1Data</a></li>
        
          
          
          <li><a href="../../OpenSSL/ASN1/ASN1Error.html">OpenSSL::ASN1::ASN1Error</a></li>
        
          
          
          <li><a href="../../OpenSSL/ASN1/Constructive.html">OpenSSL::ASN1::Constructive</a></li>
        
          
          
          <li><a href="../../OpenSSL/ASN1/ObjectId.html">OpenSSL::ASN1::ObjectId</a></li>
        
          
          
          <li><a href="../../OpenSSL/ASN1/Primitive.html">OpenSSL::ASN1::Primitive</a></li>
        
          
          
          <li><a href="../../OpenSSL/BN.html">OpenSSL::BN</a></li>
        
          
          
          <li><a href="../../OpenSSL/BNError.html">OpenSSL::BNError</a></li>
        
          
          
          <li><a href="../../OpenSSL/Buffering.html">OpenSSL::Buffering</a></li>
        
          
          
          <li><a href="../../OpenSSL/Cipher.html">OpenSSL::Cipher</a></li>
        
          
          
          <li><a href="../../OpenSSL/Cipher/Cipher.html">OpenSSL::Cipher::Cipher</a></li>
        
          
          
          <li><a href="../../OpenSSL/Cipher/CipherError.html">OpenSSL::Cipher::CipherError</a></li>
        
          
          
          <li><a href="../../OpenSSL/Config.html">OpenSSL::Config</a></li>
        
          
          
          <li><a href="../../OpenSSL/ConfigError.html">OpenSSL::ConfigError</a></li>
        
          
          
          <li><a href="../../OpenSSL/Digest.html">OpenSSL::Digest</a></li>
        
          
          
          <li><a href="../../OpenSSL/Digest/DigestError.html">OpenSSL::Digest::DigestError</a></li>
        
          
          
          <li><a href="../../OpenSSL/Engine.html">OpenSSL::Engine</a></li>
        
          
          
          <li><a href="../../OpenSSL/Engine/EngineError.html">OpenSSL::Engine::EngineError</a></li>
        
          
          
          <li><a href="../../OpenSSL/ExtConfig.html">OpenSSL::ExtConfig</a></li>
        
          
          
          <li><a href="../../OpenSSL/HMAC.html">OpenSSL::HMAC</a></li>
        
          
          
          <li><a href="../../OpenSSL/HMACError.html">OpenSSL::HMACError</a></li>
        
          
          
          <li><a href="../../OpenSSL/KDF.html">OpenSSL::KDF</a></li>
        
          
          
          <li><a href="../../OpenSSL/KDF/KDFError.html">OpenSSL::KDF::KDFError</a></li>
        
          
          
          <li><a href="../../OpenSSL/Netscape.html">OpenSSL::Netscape</a></li>
        
          
          
          <li><a href="../../OpenSSL/Netscape/SPKI.html">OpenSSL::Netscape::SPKI</a></li>
        
          
          
          <li><a href="../../OpenSSL/Netscape/SPKIError.html">OpenSSL::Netscape::SPKIError</a></li>
        
          
          
          <li><a href="../../OpenSSL/OCSP.html">OpenSSL::OCSP</a></li>
        
          
          
          <li><a href="../../OpenSSL/OCSP/BasicResponse.html">OpenSSL::OCSP::BasicResponse</a></li>
        
          
          
          <li><a href="../../OpenSSL/OCSP/CertificateId.html">OpenSSL::OCSP::CertificateId</a></li>
        
          
          
          <li><a href="../../OpenSSL/OCSP/OCSPError.html">OpenSSL::OCSP::OCSPError</a></li>
        
          
          
          <li><a href="../../OpenSSL/OCSP/Request.html">OpenSSL::OCSP::Request</a></li>
        
          
          
          <li><a href="../../OpenSSL/OCSP/Response.html">OpenSSL::OCSP::Response</a></li>
        
          
          
          <li><a href="../../OpenSSL/OCSP/SingleResponse.html">OpenSSL::OCSP::SingleResponse</a></li>
        
          
          
          <li><a href="../../OpenSSL/OpenSSLError.html">OpenSSL::OpenSSLError</a></li>
        
          
          
          <li><a href="../../OpenSSL/PKCS12.html">OpenSSL::PKCS12</a></li>
        
          
          
          <li><a href="../../OpenSSL/PKCS12/PKCS12Error.html">OpenSSL::PKCS12::PKCS12Error</a></li>
        
          
          
          <li><a href="../../OpenSSL/PKCS5.html">OpenSSL::PKCS5</a></li>
        
          
          
          <li><a href="../../OpenSSL/PKCS7.html">OpenSSL::PKCS7</a></li>
        
          
          
          <li><a href="../../OpenSSL/PKCS7/PKCS7Error.html">OpenSSL::PKCS7::PKCS7Error</a></li>
        
          
          
          <li><a href="../../OpenSSL/PKCS7/RecipientInfo.html">OpenSSL::PKCS7::RecipientInfo</a></li>
        
          
          
          <li><a href="../../OpenSSL/PKCS7/SignerInfo.html">OpenSSL::PKCS7::SignerInfo</a></li>
        
          
          
          <li><a href="../../OpenSSL/PKey.html">OpenSSL::PKey</a></li>
        
          
          
          <li><a href="../../OpenSSL/PKey/DH.html">OpenSSL::PKey::DH</a></li>
        
          
          
          <li><a href="../../OpenSSL/PKey/DHError.html">OpenSSL::PKey::DHError</a></li>
        
          
          
          <li><a href="../../OpenSSL/PKey/DSA.html">OpenSSL::PKey::DSA</a></li>
        
          
          
          <li><a href="../../OpenSSL/PKey/DSAError.html">OpenSSL::PKey::DSAError</a></li>
        
          
          
          <li><a href="../../OpenSSL/PKey/EC.html">OpenSSL::PKey::EC</a></li>
        
          
          
          <li><a href="../../OpenSSL/PKey/EC/Group.html">OpenSSL::PKey::EC::Group</a></li>
        
          
          
          <li><a href="../../OpenSSL/PKey/EC/Group/Error.html">OpenSSL::PKey::EC::Group::Error</a></li>
        
          
          
          <li><a href="../../OpenSSL/PKey/EC/Point.html">OpenSSL::PKey::EC::Point</a></li>
        
          
          
          <li><a href="../../OpenSSL/PKey/EC/Point/Error.html">OpenSSL::PKey::EC::Point::Error</a></li>
        
          
          
          <li><a href="../../OpenSSL/PKey/ECError.html">OpenSSL::PKey::ECError</a></li>
        
          
          
          <li><a href="../../OpenSSL/PKey/PKey.html">OpenSSL::PKey::PKey</a></li>
        
          
          
          <li><a href="../../OpenSSL/PKey/PKeyError.html">OpenSSL::PKey::PKeyError</a></li>
        
          
          
          <li><a href="../../OpenSSL/PKey/RSA.html">OpenSSL::PKey::RSA</a></li>
        
          
          
          <li><a href="../../OpenSSL/PKey/RSAError.html">OpenSSL::PKey::RSAError</a></li>
        
          
          
          <li><a href="../../OpenSSL/Random.html">OpenSSL::Random</a></li>
        
          
          
          <li><a href="../../OpenSSL/Random/RandomError.html">OpenSSL::Random::RandomError</a></li>
        
          
          
          <li><a href="../../OpenSSL/SSL.html">OpenSSL::SSL</a></li>
        
          
          
          <li><a href="../../OpenSSL/SSL/SSLContext.html">OpenSSL::SSL::SSLContext</a></li>
        
          
          
          <li><a href="../../OpenSSL/SSL/SSLError.html">OpenSSL::SSL::SSLError</a></li>
        
          
          
          <li><a href="../../OpenSSL/SSL/SSLErrorWaitReadable.html">OpenSSL::SSL::SSLErrorWaitReadable</a></li>
        
          
          
          <li><a href="../../OpenSSL/SSL/SSLErrorWaitWritable.html">OpenSSL::SSL::SSLErrorWaitWritable</a></li>
        
          
          
          <li><a href="../../OpenSSL/SSL/SSLServer.html">OpenSSL::SSL::SSLServer</a></li>
        
          
          
          <li><a href="../../OpenSSL/SSL/SSLSocket.html">OpenSSL::SSL::SSLSocket</a></li>
        
          
          
          <li><a href="../../OpenSSL/SSL/Session.html">OpenSSL::SSL::Session</a></li>
        
          
          
          <li><a href="../../OpenSSL/SSL/Session/SessionError.html">OpenSSL::SSL::Session::SessionError</a></li>
        
          
          
          <li><a href="../../OpenSSL/SSL/SocketForwarder.html">OpenSSL::SSL::SocketForwarder</a></li>
        
          
          
          <li><a href="../../OpenSSL/X509.html">OpenSSL::X509</a></li>
        
          
          
          <li><a href="../../OpenSSL/X509/Attribute.html">OpenSSL::X509::Attribute</a></li>
        
          
          
          <li><a href="../../OpenSSL/X509/AttributeError.html">OpenSSL::X509::AttributeError</a></li>
        
          
          
          <li><a href="../../OpenSSL/X509/CRL.html">OpenSSL::X509::CRL</a></li>
        
          
          
          <li><a href="../../OpenSSL/X509/CRLError.html">OpenSSL::X509::CRLError</a></li>
        
          
          
          <li><a href="../../OpenSSL/X509/Certificate.html">OpenSSL::X509::Certificate</a></li>
        
          
          
          <li><a href="../../OpenSSL/X509/CertificateError.html">OpenSSL::X509::CertificateError</a></li>
        
          
          
          <li><a href="../../OpenSSL/X509/Extension.html">OpenSSL::X509::Extension</a></li>
        
          
          
          <li><a href="../../OpenSSL/X509/ExtensionError.html">OpenSSL::X509::ExtensionError</a></li>
        
          
          
          <li><a href="../../OpenSSL/X509/ExtensionFactory.html">OpenSSL::X509::ExtensionFactory</a></li>
        
          
          
          <li><a href="../../OpenSSL/X509/Name.html">OpenSSL::X509::Name</a></li>
        
          
          
          <li><a href="../../OpenSSL/X509/Name/RFC2253DN.html">OpenSSL::X509::Name::RFC2253DN</a></li>
        
          
          
          <li><a href="../../OpenSSL/X509/NameError.html">OpenSSL::X509::NameError</a></li>
        
          
          
          <li><a href="../../OpenSSL/X509/Request.html">OpenSSL::X509::Request</a></li>
        
          
          
          <li><a href="../../OpenSSL/X509/RequestError.html">OpenSSL::X509::RequestError</a></li>
        
          
          
          <li><a href="../../OpenSSL/X509/Revoked.html">OpenSSL::X509::Revoked</a></li>
        
          
          
          <li><a href="../../OpenSSL/X509/RevokedError.html">OpenSSL::X509::RevokedError</a></li>
        
          
          
          <li><a href="../../OpenSSL/X509/Store.html">OpenSSL::X509::Store</a></li>
        
          
          
          <li><a href="../../OpenSSL/X509/StoreContext.html">OpenSSL::X509::StoreContext</a></li>
        
          
          
          <li><a href="../../OpenSSL/X509/StoreError.html">OpenSSL::X509::StoreError</a></li>
        
        </ul>
        <div id="no-class-search-results" style="display: none;">No matching classes.</div>
      </div>

      
    </div>
  </div> <!-- metadata -->
  <div class='adzbox'  id="azk83167">
    
  </div> 
  <div id="documentation">
    <h1 class="class">OpenSSL::PKey::DSA</h1>

    <div id="description" class="description">
      
<p><a href="DSA.html"><code>DSA</code></a>, the Digital Signature Algorithm, is specified in NIST&#39;s FIPS 186-3. It is an asymmetric public key algorithm that may be used similar to e.g. <a href="RSA.html"><code>RSA</code></a>.</p>

    </div><!-- description -->

    
    
    
    <div id="5Buntitled-5D" class="documentation-section">
      

      

      

      

      <!-- Methods -->
      
      <div id="public-class-method-details" class="method-section section">
        <h3 class="section-header">Public Class Methods</h3>

      
        <div id="generate-method" class="method-detail ">
          <a name="method-c-generate"></a>

          
          
          <div class="method-heading">
            <span class="method-callseq">generate(size) &rarr; dsa</span>
            
            <span class="method-click-advice">click to toggle source</span>
            
          </div>
          
          
          <div>
  
            
            <p>Creates a new <a href="DSA.html"><code>DSA</code></a> instance by generating a private/public key pair from scratch.</p>

<h3 id="method-c-generate-label-Parameters">Parameters<span><a href="#method-c-generate-label-Parameters">&para;</a> <a href="#top">&uarr;</a></span></h3>
<ul><li>
<p><em>size</em> is an integer representing the desired key size.</p>
</li></ul>
            

            
            <div class="method-source-code" id="generate-source">
              <pre> <!-- method.markup_code 290 -->
               static VALUE
ossl_dsa_s_generate(VALUE klass, VALUE size)
{
    DSA *dsa = dsa_generate(NUM2INT(size)); /* err handled by dsa_instance */
    VALUE obj = dsa_instance(klass, dsa);

    if (obj == Qfalse) {
        DSA_free(dsa);
        ossl_raise(eDSAError, NULL);
    }

    return obj;
}
            </pre> 
            </div><!-- generate-source -->
            
          </div>

          

          
        </div><!-- generate-method -->
      
        <div id="new-method" class="method-detail ">
          <a name="method-c-new"></a>

          
          
          <div class="method-heading">
            <span class="method-callseq">new &rarr; dsa</span>
            
            <span class="method-click-advice">click to toggle source</span>
            
          </div>
          
          <div class="method-heading">
            <span class="method-callseq">new(size) &rarr; dsa</span>
            
          </div>
          
          <div class="method-heading">
            <span class="method-callseq">new(string [, pass]) &rarr; dsa</span>
            
          </div>
          
          
          <div>
  
            
            <p>Creates a new <a href="DSA.html"><code>DSA</code></a> instance by reading an existing key from <em>string</em>.</p>

<h3 id="method-c-new-label-Parameters">Parameters<span><a href="#method-c-new-label-Parameters">&para;</a> <a href="#top">&uarr;</a></span></h3>
<ul><li>
<p><em>size</em> is an integer representing the desired key size.</p>
</li><li>
<p><em>string</em> contains a DER or PEM encoded key.</p>
</li><li>
<p><em>pass</em> is a string that contains an optional password.</p>
</li></ul>

<h3 id="method-c-new-label-Examples">Examples<span><a href="#method-c-new-label-Examples">&para;</a> <a href="#top">&uarr;</a></span></h3>

<pre>DSA.new -&gt; dsa
DSA.new(1024) -&gt; dsa
DSA.new(File.read(&#39;dsa.pem&#39;)) -&gt; dsa
DSA.new(File.read(&#39;dsa.pem&#39;), &#39;mypassword&#39;) -&gt; dsa</pre>
            

            
            <div class="method-source-code" id="new-source">
              <pre> <!-- method.markup_code 290 -->
               static VALUE
ossl_dsa_initialize(int argc, VALUE *argv, VALUE self)
{
    EVP_PKEY *pkey;
    DSA *dsa;
    BIO *in;
    VALUE arg, pass;

    GetPKey(self, pkey);
    if(rb_scan_args(argc, argv, &quot;02&quot;, &amp;arg, &amp;pass) == 0) {
        dsa = DSA_new();
    }
    else if (RB_INTEGER_TYPE_P(arg)) {
        if (!(dsa = dsa_generate(NUM2INT(arg)))) {
            ossl_raise(eDSAError, NULL);
        }
    }
    else {
        pass = ossl_pem_passwd_value(pass);
        arg = ossl_to_der_if_possible(arg);
        in = ossl_obj2bio(&amp;arg);
        dsa = PEM_read_bio_DSAPrivateKey(in, NULL, ossl_pem_passwd_cb, (void *)pass);
        if (!dsa) {
            OSSL_BIO_reset(in);
            dsa = PEM_read_bio_DSA_PUBKEY(in, NULL, NULL, NULL);
        }
        if (!dsa) {
            OSSL_BIO_reset(in);
            dsa = d2i_DSAPrivateKey_bio(in, NULL);
        }
        if (!dsa) {
            OSSL_BIO_reset(in);
            dsa = d2i_DSA_PUBKEY_bio(in, NULL);
        }
        if (!dsa) {
            OSSL_BIO_reset(in);
#define PEM_read_bio_DSAPublicKey(bp,x,cb,u) (DSA *)PEM_ASN1_read_bio( \
        (d2i_of_void *)d2i_DSAPublicKey, PEM_STRING_DSA_PUBLIC, (bp), (void **)(x), (cb), (u))
            dsa = PEM_read_bio_DSAPublicKey(in, NULL, NULL, NULL);
#undef PEM_read_bio_DSAPublicKey
        }
        BIO_free(in);
        if (!dsa) {
            ossl_clear_error();
            ossl_raise(eDSAError, &quot;Neither PUB key nor PRIV key&quot;);
        }
    }
    if (!EVP_PKEY_assign_DSA(pkey, dsa)) {
        DSA_free(dsa);
        ossl_raise(eDSAError, NULL);
    }

    return self;
}
            </pre> 
            </div><!-- new-source -->
            
          </div>

          

          
        </div><!-- new-method -->
      
      </div><!-- public-class-method-details -->
    
      <div id="public-instance-method-details" class="method-section section">
        <h3 class="section-header">Public Instance Methods</h3>

      
        <div id="export-method" class="method-detail ">
          <a name="method-i-export"></a>

          
          
          <div class="method-heading">
            <span class="method-callseq">export([cipher, password]) &rarr; aString</span>
            
            <span class="method-click-advice">click to toggle source</span>
            
          </div>
          
          <div class="method-heading">
            <span class="method-callseq">to_pem([cipher, password]) &rarr; aString</span>
            
          </div>
          
          <div class="method-heading">
            <span class="method-callseq">to_s([cipher, password]) &rarr; aString</span>
            
          </div>
          
          
          <div>
  
            
            <p>Encodes this <a href="DSA.html"><code>DSA</code></a> to its PEM encoding.</p>

<h3 id="method-i-export-label-Parameters">Parameters<span><a href="#method-i-export-label-Parameters">&para;</a> <a href="#top">&uarr;</a></span></h3>
<ul><li>
<p><em>cipher</em> is an <a href="../Cipher.html"><code>OpenSSL::Cipher</code></a>.</p>
</li><li>
<p><em>password</em> is a string containing your password.</p>
</li></ul>

<h3 id="method-i-export-label-Examples">Examples<span><a href="#method-i-export-label-Examples">&para;</a> <a href="#top">&uarr;</a></span></h3>

<pre>DSA.to_pem -&gt; aString
DSA.to_pem(cipher, &#39;mypassword&#39;) -&gt; aString</pre>
            

            
            <div class="method-source-code" id="export-source">
              <pre> <!-- method.markup_code 290 -->
               static VALUE
ossl_dsa_export(int argc, VALUE *argv, VALUE self)
{
    DSA *dsa;
    BIO *out;
    const EVP_CIPHER *ciph = NULL;
    VALUE cipher, pass, str;

    GetDSA(self, dsa);
    rb_scan_args(argc, argv, &quot;02&quot;, &amp;cipher, &amp;pass);
    if (!NIL_P(cipher)) {
        ciph = ossl_evp_get_cipherbyname(cipher);
        pass = ossl_pem_passwd_value(pass);
    }
    if (!(out = BIO_new(BIO_s_mem()))) {
        ossl_raise(eDSAError, NULL);
    }
    if (DSA_HAS_PRIVATE(dsa)) {
        if (!PEM_write_bio_DSAPrivateKey(out, dsa, ciph, NULL, 0,
                                         ossl_pem_passwd_cb, (void *)pass)){
            BIO_free(out);
            ossl_raise(eDSAError, NULL);
        }
    } else {
        if (!PEM_write_bio_DSA_PUBKEY(out, dsa)) {
            BIO_free(out);
            ossl_raise(eDSAError, NULL);
        }
    }
    str = ossl_membio2str(out);

    return str;
}
            </pre> 
            </div><!-- export-source -->
            
          </div>

          
          <div class="aliases">
            Also aliased as: <a href="DSA.html#method-i-to_pem">to_pem</a>, <a href="DSA.html#method-i-to_s">to_s</a>
          </div>
          

          
        </div><!-- export-method -->
      
        <div id="initialize_copy-method" class="method-detail ">
          <a name="method-i-initialize_copy"></a>

          
          <div class="method-heading">
            <span class="method-name">initialize_copy</span><span
              class="method-args">(p1)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            
            

            
            <div class="method-source-code" id="initialize_copy-source">
              <pre> <!-- method.markup_code 290 -->
               static VALUE
ossl_dsa_initialize_copy(VALUE self, VALUE other)
{
    EVP_PKEY *pkey;
    DSA *dsa, *dsa_new;

    GetPKey(self, pkey);
    if (EVP_PKEY_base_id(pkey) != EVP_PKEY_NONE)
        ossl_raise(eDSAError, &quot;DSA already initialized&quot;);
    GetDSA(other, dsa);

    dsa_new = ASN1_dup((i2d_of_void *)i2d_DSAPrivateKey, (d2i_of_void *)d2i_DSAPrivateKey, (char *)dsa);
    if (!dsa_new)
        ossl_raise(eDSAError, &quot;ASN1_dup&quot;);

    EVP_PKEY_assign_DSA(pkey, dsa_new);

    return self;
}
            </pre> 
            </div><!-- initialize_copy-source -->
            
          </div>

          

          
        </div><!-- initialize_copy-method -->
      
        <div id="params-method" class="method-detail ">
          <a name="method-i-params"></a>

          
          
          <div class="method-heading">
            <span class="method-callseq">params &rarr; hash</span>
            
            <span class="method-click-advice">click to toggle source</span>
            
          </div>
          
          
          <div>
  
            
            <p>Stores all parameters of key to the hash INSECURE: PRIVATE INFORMATIONS CAN LEAK OUT!!! Don&#39;t use :-)) (I&#39;s up to you)</p>
            

            
            <div class="method-source-code" id="params-source">
              <pre> <!-- method.markup_code 290 -->
               static VALUE
ossl_dsa_get_params(VALUE self)
{
    DSA *dsa;
    VALUE hash;
    const BIGNUM *p, *q, *g, *pub_key, *priv_key;

    GetDSA(self, dsa);
    DSA_get0_pqg(dsa, &amp;p, &amp;q, &amp;g);
    DSA_get0_key(dsa, &amp;pub_key, &amp;priv_key);

    hash = rb_hash_new();
    rb_hash_aset(hash, rb_str_new2(&quot;p&quot;), ossl_bn_new(p));
    rb_hash_aset(hash, rb_str_new2(&quot;q&quot;), ossl_bn_new(q));
    rb_hash_aset(hash, rb_str_new2(&quot;g&quot;), ossl_bn_new(g));
    rb_hash_aset(hash, rb_str_new2(&quot;pub_key&quot;), ossl_bn_new(pub_key));
    rb_hash_aset(hash, rb_str_new2(&quot;priv_key&quot;), ossl_bn_new(priv_key));

    return hash;
}
            </pre> 
            </div><!-- params-source -->
            
          </div>

          

          
        </div><!-- params-method -->
      
        <div id="private-3F-method" class="method-detail ">
          <a name="method-i-private-3F"></a>

          
          
          <div class="method-heading">
            <span class="method-callseq">private? &rarr; true | false</span>
            
            <span class="method-click-advice">click to toggle source</span>
            
          </div>
          
          
          <div>
  
            
            <p>Indicates whether this <a href="DSA.html"><code>DSA</code></a> instance has a private key associated with it or not. The private key may be retrieved with DSA#private_key.</p>
            

            
            <div class="method-source-code" id="private-3F-source">
              <pre> <!-- method.markup_code 290 -->
               static VALUE
ossl_dsa_is_private(VALUE self)
{
    DSA *dsa;

    GetDSA(self, dsa);

    return DSA_PRIVATE(self, dsa) ? Qtrue : Qfalse;
}
            </pre> 
            </div><!-- private-3F-source -->
            
          </div>

          

          
        </div><!-- private-3F-method -->
      
        <div id="public-3F-method" class="method-detail ">
          <a name="method-i-public-3F"></a>

          
          
          <div class="method-heading">
            <span class="method-callseq">public? &rarr; true | false</span>
            
            <span class="method-click-advice">click to toggle source</span>
            
          </div>
          
          
          <div>
  
            
            <p>Indicates whether this <a href="DSA.html"><code>DSA</code></a> instance has a public key associated with it or not. The public key may be retrieved with <a href="DSA.html#method-i-public_key"><code>DSA#public_key</code></a>.</p>
            

            
            <div class="method-source-code" id="public-3F-source">
              <pre> <!-- method.markup_code 290 -->
               static VALUE
ossl_dsa_is_public(VALUE self)
{
    DSA *dsa;
    const BIGNUM *bn;

    GetDSA(self, dsa);
    DSA_get0_key(dsa, &amp;bn, NULL);

    return bn ? Qtrue : Qfalse;
}
            </pre> 
            </div><!-- public-3F-source -->
            
          </div>

          

          
        </div><!-- public-3F-method -->
      
        <div id="public_key-method" class="method-detail ">
          <a name="method-i-public_key"></a>

          
          
          <div class="method-heading">
            <span class="method-callseq">public_key &rarr; aDSA</span>
            
            <span class="method-click-advice">click to toggle source</span>
            
          </div>
          
          
          <div>
  
            
            <p>Returns a new <a href="DSA.html"><code>DSA</code></a> instance that carries just the public key information. If the current instance has also private key information, this will no longer be present in the new instance. This feature is helpful for publishing the public key information without leaking any of the private information.</p>

<h3 id="method-i-public_key-label-Example">Example<span><a href="#method-i-public_key-label-Example">&para;</a> <a href="#top">&uarr;</a></span></h3>

<pre class="ruby"><span class="ruby-identifier">dsa</span> = <span class="ruby-constant">OpenSSL</span><span class="ruby-operator">::</span><span class="ruby-constant">PKey</span><span class="ruby-operator">::</span><span class="ruby-constant">DSA</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">2048</span>) <span class="ruby-comment"># has public and private information</span>
<span class="ruby-identifier">pub_key</span> = <span class="ruby-identifier">dsa</span>.<span class="ruby-identifier">public_key</span> <span class="ruby-comment"># has only the public part available</span>
<span class="ruby-identifier">pub_key_der</span> = <span class="ruby-identifier">pub_key</span>.<span class="ruby-identifier">to_der</span> <span class="ruby-comment"># it&#39;s safe to publish this</span>
</pre>
            

            
            <div class="method-source-code" id="public_key-source">
              <pre> <!-- method.markup_code 290 -->
               static VALUE
ossl_dsa_to_public_key(VALUE self)
{
    EVP_PKEY *pkey;
    DSA *dsa;
    VALUE obj;

    GetPKeyDSA(self, pkey);
    /* err check performed by dsa_instance */
#define DSAPublicKey_dup(dsa) (DSA *)ASN1_dup( \
        (i2d_of_void *)i2d_DSAPublicKey, (d2i_of_void *)d2i_DSAPublicKey, (char *)(dsa))
    dsa = DSAPublicKey_dup(EVP_PKEY_get0_DSA(pkey));
#undef DSAPublicKey_dup
    obj = dsa_instance(rb_obj_class(self), dsa);
    if (obj == Qfalse) {
        DSA_free(dsa);
        ossl_raise(eDSAError, NULL);
    }
    return obj;
}
            </pre> 
            </div><!-- public_key-source -->
            
          </div>

          

          
        </div><!-- public_key-method -->
      
        <div id="set_key-method" class="method-detail ">
          <a name="method-i-set_key"></a>

          
          
          <div class="method-heading">
            <span class="method-callseq">set_key(pub_key, priv_key) &rarr; self</span>
            
            <span class="method-click-advice">click to toggle source</span>
            
          </div>
          
          
          <div>
  
            
            <p>Sets <em>pub_key</em> and <em>priv_key</em> for the <a href="DSA.html"><code>DSA</code></a> instance. <em>priv_key</em> may be <code>nil</code>.</p>
            

            
          </div>

          

          
        </div><!-- set_key-method -->
      
        <div id="set_pqg-method" class="method-detail ">
          <a name="method-i-set_pqg"></a>

          
          
          <div class="method-heading">
            <span class="method-callseq">set_pqg(p, q, g) &rarr; self</span>
            
            <span class="method-click-advice">click to toggle source</span>
            
          </div>
          
          
          <div>
  
            
            <p>Sets <em>p</em>, <em>q</em>, <em>g</em> to the <a href="DSA.html"><code>DSA</code></a> instance.</p>
            

            
          </div>

          

          
        </div><!-- set_pqg-method -->
      
        <div id="syssign-method" class="method-detail ">
          <a name="method-i-syssign"></a>

          
          
          <div class="method-heading">
            <span class="method-callseq">syssign(string) &rarr; aString</span>
            
            <span class="method-click-advice">click to toggle source</span>
            
          </div>
          
          
          <div>
  
            
            <p>Computes and returns the <a href="DSA.html"><code>DSA</code></a> signature of <em>string</em>, where <em>string</em> is expected to be an already-computed message digest of the original input data. The signature is issued using the private key of this <a href="DSA.html"><code>DSA</code></a> instance.</p>

<h3 id="method-i-syssign-label-Parameters">Parameters<span><a href="#method-i-syssign-label-Parameters">&para;</a> <a href="#top">&uarr;</a></span></h3>
<ul><li>
<p><em>string</em> is a message digest of the original input data to be signed.</p>
</li></ul>

<h3 id="method-i-syssign-label-Example">Example<span><a href="#method-i-syssign-label-Example">&para;</a> <a href="#top">&uarr;</a></span></h3>

<pre class="ruby"><span class="ruby-identifier">dsa</span> = <span class="ruby-constant">OpenSSL</span><span class="ruby-operator">::</span><span class="ruby-constant">PKey</span><span class="ruby-operator">::</span><span class="ruby-constant">DSA</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">2048</span>)
<span class="ruby-identifier">doc</span> = <span class="ruby-string">&quot;Sign me&quot;</span>
<span class="ruby-identifier">digest</span> = <span class="ruby-constant">OpenSSL</span><span class="ruby-operator">::</span><span class="ruby-constant">Digest</span><span class="ruby-operator">::</span><span class="ruby-constant">SHA1</span>.<span class="ruby-identifier">digest</span>(<span class="ruby-identifier">doc</span>)
<span class="ruby-identifier">sig</span> = <span class="ruby-identifier">dsa</span>.<span class="ruby-identifier">syssign</span>(<span class="ruby-identifier">digest</span>)
</pre>
            

            
            <div class="method-source-code" id="syssign-source">
              <pre> <!-- method.markup_code 290 -->
               static VALUE
ossl_dsa_sign(VALUE self, VALUE data)
{
    DSA *dsa;
    const BIGNUM *dsa_q;
    unsigned int buf_len;
    VALUE str;

    GetDSA(self, dsa);
    DSA_get0_pqg(dsa, NULL, &amp;dsa_q, NULL);
    if (!dsa_q)
        ossl_raise(eDSAError, &quot;incomplete DSA&quot;);
    if (!DSA_PRIVATE(self, dsa))
        ossl_raise(eDSAError, &quot;Private DSA key needed!&quot;);
    StringValue(data);
    str = rb_str_new(0, DSA_size(dsa));
    if (!DSA_sign(0, (unsigned char *)RSTRING_PTR(data), RSTRING_LENINT(data),
                  (unsigned char *)RSTRING_PTR(str),
                  &amp;buf_len, dsa)) { /* type is ignored (0) */
        ossl_raise(eDSAError, NULL);
    }
    rb_str_set_len(str, buf_len);

    return str;
}
            </pre> 
            </div><!-- syssign-source -->
            
          </div>

          

          
        </div><!-- syssign-method -->
      
        <div id="sysverify-method" class="method-detail ">
          <a name="method-i-sysverify"></a>

          
          
          <div class="method-heading">
            <span class="method-callseq">sysverify(digest, sig) &rarr; true | false</span>
            
            <span class="method-click-advice">click to toggle source</span>
            
          </div>
          
          
          <div>
  
            
            <p>Verifies whether the signature is valid given the message digest input. It does so by validating <em>sig</em> using the public key of this <a href="DSA.html"><code>DSA</code></a> instance.</p>

<h3 id="method-i-sysverify-label-Parameters">Parameters<span><a href="#method-i-sysverify-label-Parameters">&para;</a> <a href="#top">&uarr;</a></span></h3>
<ul><li>
<p><em>digest</em> is a message digest of the original input data to be signed</p>
</li><li>
<p><em>sig</em> is a <a href="DSA.html"><code>DSA</code></a> signature value</p>
</li></ul>

<h3 id="method-i-sysverify-label-Example">Example<span><a href="#method-i-sysverify-label-Example">&para;</a> <a href="#top">&uarr;</a></span></h3>

<pre class="ruby"><span class="ruby-identifier">dsa</span> = <span class="ruby-constant">OpenSSL</span><span class="ruby-operator">::</span><span class="ruby-constant">PKey</span><span class="ruby-operator">::</span><span class="ruby-constant">DSA</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">2048</span>)
<span class="ruby-identifier">doc</span> = <span class="ruby-string">&quot;Sign me&quot;</span>
<span class="ruby-identifier">digest</span> = <span class="ruby-constant">OpenSSL</span><span class="ruby-operator">::</span><span class="ruby-constant">Digest</span><span class="ruby-operator">::</span><span class="ruby-constant">SHA1</span>.<span class="ruby-identifier">digest</span>(<span class="ruby-identifier">doc</span>)
<span class="ruby-identifier">sig</span> = <span class="ruby-identifier">dsa</span>.<span class="ruby-identifier">syssign</span>(<span class="ruby-identifier">digest</span>)
<span class="ruby-identifier">puts</span> <span class="ruby-identifier">dsa</span>.<span class="ruby-identifier">sysverify</span>(<span class="ruby-identifier">digest</span>, <span class="ruby-identifier">sig</span>) <span class="ruby-comment"># =&gt; true</span>
</pre>
            

            
            <div class="method-source-code" id="sysverify-source">
              <pre> <!-- method.markup_code 290 -->
               static VALUE
ossl_dsa_verify(VALUE self, VALUE digest, VALUE sig)
{
    DSA *dsa;
    int ret;

    GetDSA(self, dsa);
    StringValue(digest);
    StringValue(sig);
    /* type is ignored (0) */
    ret = DSA_verify(0, (unsigned char *)RSTRING_PTR(digest), RSTRING_LENINT(digest),
                     (unsigned char *)RSTRING_PTR(sig), RSTRING_LENINT(sig), dsa);
    if (ret &lt; 0) {
        ossl_raise(eDSAError, NULL);
    }
    else if (ret == 1) {
        return Qtrue;
    }

    return Qfalse;
}
            </pre> 
            </div><!-- sysverify-source -->
            
          </div>

          

          
        </div><!-- sysverify-method -->
      
        <div id="to_der-method" class="method-detail ">
          <a name="method-i-to_der"></a>

          
          
          <div class="method-heading">
            <span class="method-callseq">to_der &rarr; aString</span>
            
            <span class="method-click-advice">click to toggle source</span>
            
          </div>
          
          
          <div>
  
            
            <p>Encodes this <a href="DSA.html"><code>DSA</code></a> to its DER encoding.</p>
            

            
            <div class="method-source-code" id="to_der-source">
              <pre> <!-- method.markup_code 290 -->
               static VALUE
ossl_dsa_to_der(VALUE self)
{
    DSA *dsa;
    int (*i2d_func)(DSA *, unsigned char **);
    unsigned char *p;
    long len;
    VALUE str;

    GetDSA(self, dsa);
    if(DSA_HAS_PRIVATE(dsa))
        i2d_func = (int (*)(DSA *,unsigned char **))i2d_DSAPrivateKey;
    else
        i2d_func = i2d_DSA_PUBKEY;
    if((len = i2d_func(dsa, NULL)) &lt;= 0)
        ossl_raise(eDSAError, NULL);
    str = rb_str_new(0, len);
    p = (unsigned char *)RSTRING_PTR(str);
    if(i2d_func(dsa, &amp;p) &lt; 0)
        ossl_raise(eDSAError, NULL);
    ossl_str_adjust(str, p);

    return str;
}
            </pre> 
            </div><!-- to_der-source -->
            
          </div>

          

          
        </div><!-- to_der-method -->
      
        <div id="to_pem-method" class="method-detail method-alias">
          <a name="method-i-to_pem"></a>

          
          <div class="method-heading">
            <span class="method-name">to_pem</span><span
              class="method-args">(p1 = v1, p2 = v2)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            
            

            
          </div>

          

          
          <div class="aliases">
            Alias for: <a href="DSA.html#method-i-export">export</a>
          </div>
          
        </div><!-- to_pem-method -->
      
        <div id="to_s-method" class="method-detail method-alias">
          <a name="method-i-to_s"></a>

          
          <div class="method-heading">
            <span class="method-name">to_s</span><span
              class="method-args">(p1 = v1, p2 = v2)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            
            

            
          </div>

          

          
          <div class="aliases">
            Alias for: <a href="DSA.html#method-i-export">export</a>
          </div>
          
        </div><!-- to_s-method -->
      
        <div id="to_text-method" class="method-detail ">
          <a name="method-i-to_text"></a>

          
          
          <div class="method-heading">
            <span class="method-callseq">to_text &rarr; aString</span>
            
            <span class="method-click-advice">click to toggle source</span>
            
          </div>
          
          
          <div>
  
            
            <p>Prints all parameters of key to buffer INSECURE: PRIVATE INFORMATIONS CAN LEAK OUT!!! Don&#39;t use :-)) (I&#39;s up to you)</p>
            

            
            <div class="method-source-code" id="to_text-source">
              <pre> <!-- method.markup_code 290 -->
               static VALUE
ossl_dsa_to_text(VALUE self)
{
    DSA *dsa;
    BIO *out;
    VALUE str;

    GetDSA(self, dsa);
    if (!(out = BIO_new(BIO_s_mem()))) {
        ossl_raise(eDSAError, NULL);
    }
    if (!DSA_print(out, dsa, 0)) { /* offset = 0 */
        BIO_free(out);
        ossl_raise(eDSAError, NULL);
    }
    str = ossl_membio2str(out);

    return str;
}
            </pre> 
            </div><!-- to_text-source -->
            
          </div>

          

          
        </div><!-- to_text-method -->
      
      </div><!-- public-instance-method-details -->
    
    </div><!-- 5Buntitled-5D -->
  
  <div id='tx_DSA_versioned' class='associated_wrapper'></div><script type='text/javascript'>$("#tx_DSA_versioned").load("/associated/2.7.4/DSA.ihtml");</script> <div id='tx_DSA' class='associated_wrapper'></div><script type='text/javascript'>$("#tx_DSA").load("/associated/DSA.ihtml");</script> 
      
  </div><!-- documentation -->
  <div id='dynamic'>
  </div>
      
<div class='grids wrapper' id="footer">
  <p><small>This page was generated for Ruby 2.7.4</small></p> 
  
   <p><a href="http://ruby-doc.org">Ruby-doc.org</a> is provided by <a href="http://jamesbritt.com">James Britt</a> and <a href="http://neurogami.com">Neurogami</a>. <a href="http://neurogami.com">Maximum R+D</a>.  <div class='oio-inline'><ins data-revive-zoneid="1" data-revive-id="58924a5717c091dfee6dda3f7d38c4d7"></ins><script async src="//ras.ruby-doc.org/vvv/delivery/thesinkjs.php"></script></div></p>
 
       <p><small>Generated with Ruby-doc Rdoc Generator 0.42.0</small>.</p>
  </div>
</div>
  
 <script type='text/javascript'>
$(document).ready(function() {
      $.ajaxSetup({ cache: false });
      $("#vulns-alert").load("/associated/vulns.ihtml");
    });

    </script>


 
		<script type='text/javascript'>

	function loadPlus(plusdocs){
			$(plusdocs).find("div[class='associated_wrapper']").each (function() {
					$("#" + this.id).append($(plusdocs).find("#" + this.id ));
					});
	} 

   //function loadInline(json){
   // for (var lookFor in json) {
    //  $(lookFor).after(json[lookFor]);
    // }
  // } // end loadInline


$(document).ready(function() {
		$.ajaxSetup({ cache: false });
			$.get('/associated/2.7.4/plus_DSA.ihtml', 
			function(plusdocs) {
			setTimeout(function() {
				loadPlus(plusdocs);
				}, 2000);
			}
			);


//     $.ajax({
//     dataType: "json",
//      url: '/associated/2.7.4/inline_DSA.js',
//      success: function(json) {
// 			setTimeout(function() {
// 				loadInline(json);
// 				}, 2000);
// 			}
//    });

		});
</script>
		
</body>
</html>


