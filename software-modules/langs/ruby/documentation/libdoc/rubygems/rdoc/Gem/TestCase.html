<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="https://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <!-- classpage -- >
    <!-- RD version: 0.42.0  -->
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />
  <meta name='description' content='  Class : Gem::TestCase  -   Ruby 2.7.4 ' />
  <meta content="2021-12-08 17:30:51 -0700" http-equiv="change-date" />
  <!-- rel_prefix  = '..'  ENV['RDOC_FOR_WEBSITE']   = false-->
    
  <!-- rel_prefix = '..'   asset_rel_prefix = '..'  --> 
  <title>Class: Gem::TestCase (Ruby 2.7.4) </title>
  <link rel="stylesheet" href="../css/associated.css" type="text/css" >
  <!-- link rel="stylesheet" href="..css/obf.css"  -->
  <link rel="stylesheet" href="../css/inuit.css" >
  <link rel="stylesheet" href="../css/grid.inuit.css" >
  <link rel="stylesheet" href="../css/2011.css" type="text/css" >
  <link rel="stylesheet" href="../css/rdoc.css" type="text/css" >
    <link rel="stylesheet" href="../css/carbon17.css" type="text/css" >


  <script src="../js/jquery.js" type="text/javascript" charset="utf-8"></script>
  <script src="../js/thickbox-compressed.js" type="text/javascript" charset="utf-8"></script>
  <script src="../js/quicksearch.js" type="text/javascript" charset="utf-8"></script>
  <script src="../js/rubydoc.js" type="text/javascript" charset="utf-8"></script> 


   
<script src="../js/highlight.min.js"></script>
<script> 
  hljs.tabReplace = '  ';
  hljs.initHighlightingOnLoad();
  </script> 

  <style type='text/css'>

    #vulns-alert #vulns{
      background-color: #c33 ! important;
      width: 100%;
      text-align: center;
   }
   
   #vulns-alert #vulns a {
    color: #F99 ! important;
   }
 </style>

   <link rel="stylesheet" href="css/extra.css" type="text/css" >
  <script  src="/js/extra.js"  ></script>


</head>

<body id="top" class="class rdocstar">

<div id='actionbar' >
<div class='wrapper'>
  <ul class='grids g0'></ul>
</div>
<span id='vulns-alert'></span>
<!-- VERSION HEADER for 2.7.4 NOT FOUND -->
</div> <!-- end action bar -->
 <div class='wrapper'>
  
   <!-- carbon17 added here 2017-09-09 -->
 

   <div id="metadata">
    <div id="home-metadata">
      <div id="home-section" class="section">
        <h3 class="section-header">
          <a href="../index.html">Home</a>
          <a href="../index.html#classes">Classes</a>
          <a href="../index.html#methods">Methods</a>
          
        </h3>
      </div>
    </div>

    <div id="file-metadata">
      <div id="file-list-section" class="section">
        <h3 class="section-header">In Files</h3>
        <div class="section-body">
          <ul id='file-metadata'>

          
          
          
          <li class='in-file'>rubygems/test_case.rb</li>      
            
          
          <li class='in-file'>rubygems/test_utilities.rb</li>      
            
          </ul>
        </div>
      </div>

      
    </div>

    <div id="class-metadata">
      
      <!-- Parent Class -->
      <div id="parent-class-section" class="section">
        <h3 class="section-header">Parent</h3>
        
        <p class="link">(defined?(Minitest::Test) ? Minitest::Test : MiniTest::Unit::TestCase)</p>
        
      </div>
      

      

      
      <!-- Namespace Contents -->
      <div id="namespace-list-section" class="section">
        <h3 class="section-header">Namespace</h3>
        <ul class="link-list">
          
          <li><span class="type">CLASS</span> <a href="TestCase/SpecFetcherSetup.html">Gem::TestCase::SpecFetcherSetup</a></li>
          
          <li><span class="type">CLASS</span> <a href="TestCase/StaticSet.html">Gem::TestCase::StaticSet</a></li>
          
        </ul>
      </div>
      

      
      <!-- Method Quickref -->
      <div id="method-list-section" class="section">
        <h3 class="section-header">Methods</h3>
        <ul class="link-list">
          
          <li><a href="#method-c-java_platform-3F">::java_platform?</a></li>
          
          <li><a href="#method-c-make_command">::make_command</a></li>
          
          <li><a href="#method-c-process_based_port">::process_based_port</a></li>
          
          <li><a href="#method-c-rubybin">::rubybin</a></li>
          
          <li><a href="#method-c-vc_windows-3F">::vc_windows?</a></li>
          
          <li><a href="#method-c-win_platform-3F">::win_platform?</a></li>
          
          <li><a href="#method-i-add_to_fetcher">#add_to_fetcher</a></li>
          
          <li><a href="#method-i-all_spec_names">#all_spec_names</a></li>
          
          <li><a href="#method-i-ask_if_ok">#ask_if_ok</a></li>
          
          <li><a href="#method-i-assert_activate">#assert_activate</a></li>
          
          <li><a href="#method-i-assert_contains_make_command">#assert_contains_make_command</a></li>
          
          <li><a href="#method-i-assert_directory_exists">#assert_directory_exists</a></li>
          
          <li><a href="#method-i-assert_path_exists">#assert_path_exists</a></li>
          
          <li><a href="#method-i-bindir">#bindir</a></li>
          
          <li><a href="#method-i-build_rake_in">#build_rake_in</a></li>
          
          <li><a href="#method-i-common_installer_setup">#common_installer_setup</a></li>
          
          <li><a href="#method-i-common_installer_teardown">#common_installer_teardown</a></li>
          
          <li><a href="#method-i-enable_shared">#enable_shared</a></li>
          
          <li><a href="#method-i-exeext">#exeext</a></li>
          
          <li><a href="#method-i-git_gem">#git_gem</a></li>
          
          <li><a href="#method-i-have_git-3F">#have_git?</a></li>
          
          <li><a href="#method-i-install_default_gems">#install_default_gems</a></li>
          
          <li><a href="#method-i-install_default_specs">#install_default_specs</a></li>
          
          <li><a href="#method-i-install_gem">#install_gem</a></li>
          
          <li><a href="#method-i-install_gem_user">#install_gem_user</a></li>
          
          <li><a href="#method-i-install_specs">#install_specs</a></li>
          
          <li><a href="#method-i-java_platform-3F">#java_platform?</a></li>
          
          <li><a href="#method-i-loaded_spec_names">#loaded_spec_names</a></li>
          
          <li><a href="#method-i-make_command">#make_command</a></li>
          
          <li><a href="#method-i-mu_pp">#mu_pp</a></li>
          
          <li><a href="#method-i-new_default_spec">#new_default_spec</a></li>
          
          <li><a href="#method-i-nmake_found-3F">#nmake_found?</a></li>
          
          <li><a href="#method-i-parse_make_command_line">#parse_make_command_line</a></li>
          
          <li><a href="#method-i-process_based_port">#process_based_port</a></li>
          
          <li><a href="#method-i-quick_gem">#quick_gem</a></li>
          
          <li><a href="#method-i-read_binary">#read_binary</a></li>
          
          <li><a href="#method-i-read_cache">#read_cache</a></li>
          
          <li><a href="#method-i-refute_path_exists">#refute_path_exists</a></li>
          
          <li><a href="#method-i-save_loaded_features">#save_loaded_features</a></li>
          
          <li><a href="#method-i-scan_make_command_lines">#scan_make_command_lines</a></li>
          
          <li><a href="#method-i-setup">#setup</a></li>
          
          <li><a href="#method-i-teardown">#teardown</a></li>
          
          <li><a href="#method-i-uninstall_gem">#uninstall_gem</a></li>
          
          <li><a href="#method-i-unresolved_names">#unresolved_names</a></li>
          
          <li><a href="#method-i-util_build_gem">#util_build_gem</a></li>
          
          <li><a href="#method-i-util_clear_RUBY_VERSION">#util_clear_RUBY_VERSION</a></li>
          
          <li><a href="#method-i-util_clear_gems">#util_clear_gems</a></li>
          
          <li><a href="#method-i-util_gem">#util_gem</a></li>
          
          <li><a href="#method-i-util_gzip">#util_gzip</a></li>
          
          <li><a href="#method-i-util_make_gems">#util_make_gems</a></li>
          
          <li><a href="#method-i-util_remove_gem">#util_remove_gem</a></li>
          
          <li><a href="#method-i-util_restore_RUBY_VERSION">#util_restore_RUBY_VERSION</a></li>
          
          <li><a href="#method-i-util_set_RUBY_VERSION">#util_set_RUBY_VERSION</a></li>
          
          <li><a href="#method-i-util_set_arch">#util_set_arch</a></li>
          
          <li><a href="#method-i-util_setup_spec_fetcher">#util_setup_spec_fetcher</a></li>
          
          <li><a href="#method-i-util_spec">#util_spec</a></li>
          
          <li><a href="#method-i-util_zip">#util_zip</a></li>
          
          <li><a href="#method-i-vc_windows-3F">#vc_windows?</a></li>
          
          <li><a href="#method-i-vendordir">#vendordir</a></li>
          
          <li><a href="#method-i-wait_for_child_process_to_exit">#wait_for_child_process_to_exit</a></li>
          
          <li><a href="#method-i-win_platform-3F">#win_platform?</a></li>
          
          <li><a href="#method-i-with_clean_path_to_ruby">#with_clean_path_to_ruby</a></li>
          
          <li><a href="#method-i-write_file">#write_file</a></li>
          
        </ul>
      </div>
      

      
      <!-- Included Modules -->
      <div id="includes-section" class="section">
        <h3 class="section-header">Included Modules</h3>
        <ul class="link-list">
        
        
          <li><a class="include" href="DefaultUserInteraction.html">Gem::DefaultUserInteraction</a></li>
        
        
        </ul>
      </div>
      
    </div>

    <div id="project-metadata">
      
      

      <div id="classindex-section" class="section project-section">
        <h3 class="section-header">Class/Module Index
          <span class="search-toggle"><img src="../images/find.png"
            height="16" width="16" alt="[+]"
            title="show/hide quicksearch" /></span></h3>
        <form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
        <fieldset>
          <legend>Quicksearch</legend>
          <input type="text" name="quicksearch" value=""
            class="quicksearch-field" />
        </fieldset>
        </form>

        <ul class="link-list">
          
          
          
          <li><a href="../Gem/AvailableSet.html">Gem::AvailableSet</a></li>
        
          
          
          <li><a href="../Gem/BasicSpecification.html">Gem::BasicSpecification</a></li>
        
          
          
          <li><a href="../Gem/BundlerVersionFinder.html">Gem::BundlerVersionFinder</a></li>
        
          
          
          <li><a href="../Gem/Command.html">Gem::Command</a></li>
        
          
          
          <li><a href="../Gem/CommandLineError.html">Gem::CommandLineError</a></li>
        
          
          
          <li><a href="../Gem/CommandManager.html">Gem::CommandManager</a></li>
        
          
          
          <li><a href="../Gem/Commands.html">Gem::Commands</a></li>
        
          
          
          <li><a href="../Gem/Commands/BuildCommand.html">Gem::Commands::BuildCommand</a></li>
        
          
          
          <li><a href="../Gem/Commands/CertCommand.html">Gem::Commands::CertCommand</a></li>
        
          
          
          <li><a href="../Gem/Commands/CheckCommand.html">Gem::Commands::CheckCommand</a></li>
        
          
          
          <li><a href="../Gem/Commands/CleanupCommand.html">Gem::Commands::CleanupCommand</a></li>
        
          
          
          <li><a href="../Gem/Commands/ContentsCommand.html">Gem::Commands::ContentsCommand</a></li>
        
          
          
          <li><a href="../Gem/Commands/DependencyCommand.html">Gem::Commands::DependencyCommand</a></li>
        
          
          
          <li><a href="../Gem/Commands/EnvironmentCommand.html">Gem::Commands::EnvironmentCommand</a></li>
        
          
          
          <li><a href="../Gem/Commands/FetchCommand.html">Gem::Commands::FetchCommand</a></li>
        
          
          
          <li><a href="../Gem/Commands/GenerateIndexCommand.html">Gem::Commands::GenerateIndexCommand</a></li>
        
          
          
          <li><a href="../Gem/Commands/HelpCommand.html">Gem::Commands::HelpCommand</a></li>
        
          
          
          <li><a href="../Gem/Commands/InfoCommand.html">Gem::Commands::InfoCommand</a></li>
        
          
          
          <li><a href="../Gem/Commands/InstallCommand.html">Gem::Commands::InstallCommand</a></li>
        
          
          
          <li><a href="../Gem/Commands/ListCommand.html">Gem::Commands::ListCommand</a></li>
        
          
          
          <li><a href="../Gem/Commands/LockCommand.html">Gem::Commands::LockCommand</a></li>
        
          
          
          <li><a href="../Gem/Commands/MirrorCommand.html">Gem::Commands::MirrorCommand</a></li>
        
          
          
          <li><a href="../Gem/Commands/OpenCommand.html">Gem::Commands::OpenCommand</a></li>
        
          
          
          <li><a href="../Gem/Commands/OutdatedCommand.html">Gem::Commands::OutdatedCommand</a></li>
        
          
          
          <li><a href="../Gem/Commands/OwnerCommand.html">Gem::Commands::OwnerCommand</a></li>
        
          
          
          <li><a href="../Gem/Commands/PristineCommand.html">Gem::Commands::PristineCommand</a></li>
        
          
          
          <li><a href="../Gem/Commands/PushCommand.html">Gem::Commands::PushCommand</a></li>
        
          
          
          <li><a href="../Gem/Commands/QueryCommand.html">Gem::Commands::QueryCommand</a></li>
        
          
          
          <li><a href="../Gem/Commands/RdocCommand.html">Gem::Commands::RdocCommand</a></li>
        
          
          
          <li><a href="../Gem/Commands/SearchCommand.html">Gem::Commands::SearchCommand</a></li>
        
          
          
          <li><a href="../Gem/Commands/ServerCommand.html">Gem::Commands::ServerCommand</a></li>
        
          
          
          <li><a href="../Gem/Commands/SetupCommand.html">Gem::Commands::SetupCommand</a></li>
        
          
          
          <li><a href="../Gem/Commands/SetupCommand/MakeDirs.html">Gem::Commands::SetupCommand::MakeDirs</a></li>
        
          
          
          <li><a href="../Gem/Commands/SigninCommand.html">Gem::Commands::SigninCommand</a></li>
        
          
          
          <li><a href="../Gem/Commands/SignoutCommand.html">Gem::Commands::SignoutCommand</a></li>
        
          
          
          <li><a href="../Gem/Commands/SourcesCommand.html">Gem::Commands::SourcesCommand</a></li>
        
          
          
          <li><a href="../Gem/Commands/SpecificationCommand.html">Gem::Commands::SpecificationCommand</a></li>
        
          
          
          <li><a href="../Gem/Commands/StaleCommand.html">Gem::Commands::StaleCommand</a></li>
        
          
          
          <li><a href="../Gem/Commands/UninstallCommand.html">Gem::Commands::UninstallCommand</a></li>
        
          
          
          <li><a href="../Gem/Commands/UnpackCommand.html">Gem::Commands::UnpackCommand</a></li>
        
          
          
          <li><a href="../Gem/Commands/UpdateCommand.html">Gem::Commands::UpdateCommand</a></li>
        
          
          
          <li><a href="../Gem/Commands/WhichCommand.html">Gem::Commands::WhichCommand</a></li>
        
          
          
          <li><a href="../Gem/Commands/YankCommand.html">Gem::Commands::YankCommand</a></li>
        
          
          
          <li><a href="../Gem/ConfigFile.html">Gem::ConfigFile</a></li>
        
          
          
          <li><a href="../Gem/ConflictError.html">Gem::ConflictError</a></li>
        
          
          
          <li><a href="../Gem/ConsoleUI.html">Gem::ConsoleUI</a></li>
        
          
          
          <li><a href="../Gem/DefaultUserInteraction.html">Gem::DefaultUserInteraction</a></li>
        
          
          
          <li><a href="../Gem/Dependency.html">Gem::Dependency</a></li>
        
          
          
          <li><a href="../Gem/DependencyError.html">Gem::DependencyError</a></li>
        
          
          
          <li><a href="../Gem/DependencyInstaller.html">Gem::DependencyInstaller</a></li>
        
          
          
          <li><a href="../Gem/DependencyList.html">Gem::DependencyList</a></li>
        
          
          
          <li><a href="../Gem/DependencyRemovalException.html">Gem::DependencyRemovalException</a></li>
        
          
          
          <li><a href="../Gem/DependencyResolutionError.html">Gem::DependencyResolutionError</a></li>
        
          
          
          <li><a href="../Gem/Deprecate.html">Gem::Deprecate</a></li>
        
          
          
          <li><a href="../Gem/Doctor.html">Gem::Doctor</a></li>
        
          
          
          <li><a href="../Gem/DocumentError.html">Gem::DocumentError</a></li>
        
          
          
          <li><a href="../Gem/EndOfYAMLException.html">Gem::EndOfYAMLException</a></li>
        
          
          
          <li><a href="../Gem/ErrorReason.html">Gem::ErrorReason</a></li>
        
          
          
          <li><a href="../Gem/Exception.html">Gem::Exception</a></li>
        
          
          
          <li><a href="../Gem/Ext.html">Gem::Ext</a></li>
        
          
          
          <li><a href="../Gem/Ext/BuildError.html">Gem::Ext::BuildError</a></li>
        
          
          
          <li><a href="../Gem/Ext/Builder.html">Gem::Ext::Builder</a></li>
        
          
          
          <li><a href="../Gem/Ext/CmakeBuilder.html">Gem::Ext::CmakeBuilder</a></li>
        
          
          
          <li><a href="../Gem/Ext/ConfigureBuilder.html">Gem::Ext::ConfigureBuilder</a></li>
        
          
          
          <li><a href="../Gem/Ext/ExtConfBuilder.html">Gem::Ext::ExtConfBuilder</a></li>
        
          
          
          <li><a href="../Gem/Ext/RakeBuilder.html">Gem::Ext::RakeBuilder</a></li>
        
          
          
          <li><a href="../Gem/FakeFetcher.html">Gem::FakeFetcher</a></li>
        
          
          
          <li><a href="../Gem/FilePermissionError.html">Gem::FilePermissionError</a></li>
        
          
          
          <li><a href="../Gem/FormatException.html">Gem::FormatException</a></li>
        
          
          
          <li><a href="../Gem/GemNotFoundException.html">Gem::GemNotFoundException</a></li>
        
          
          
          <li><a href="../Gem/GemNotInHomeException.html">Gem::GemNotInHomeException</a></li>
        
          
          
          <li><a href="../Gem/GemRunner.html">Gem::GemRunner</a></li>
        
          
          
          <li><a href="../Gem/GemcutterUtilities.html">Gem::GemcutterUtilities</a></li>
        
          
          
          <li><a href="../Gem/ImpossibleDependenciesError.html">Gem::ImpossibleDependenciesError</a></li>
        
          
          
          <li><a href="../Gem/Indexer.html">Gem::Indexer</a></li>
        
          
          
          <li><a href="../Gem/InstallError.html">Gem::InstallError</a></li>
        
          
          
          <li><a href="../Gem/InstallUpdateOptions.html">Gem::InstallUpdateOptions</a></li>
        
          
          
          <li><a href="../Gem/Installer.html">Gem::Installer</a></li>
        
          
          
          <li><a href="../Gem/Installer/FakePackage.html">Gem::Installer::FakePackage</a></li>
        
          
          
          <li><a href="../Gem/InstallerTestCase.html">Gem::InstallerTestCase</a></li>
        
          
          
          <li><a href="../Gem/InvalidSpecificationException.html">Gem::InvalidSpecificationException</a></li>
        
          
          
          <li><a href="../Gem/Licenses.html">Gem::Licenses</a></li>
        
          
          
          <li><a href="../Gem/List.html">Gem::List</a></li>
        
          
          
          <li><a href="../Gem/LoadError.html">Gem::LoadError</a></li>
        
          
          
          <li><a href="../Gem/LocalRemoteOptions.html">Gem::LocalRemoteOptions</a></li>
        
          
          
          <li><a href="../Gem/MissingSpecError.html">Gem::MissingSpecError</a></li>
        
          
          
          <li><a href="../Gem/MissingSpecVersionError.html">Gem::MissingSpecVersionError</a></li>
        
          
          
          <li><a href="../Gem/MockGemUi.html">Gem::MockGemUi</a></li>
        
          
          
          <li><a href="../Gem/MockGemUi/InputEOFError.html">Gem::MockGemUi::InputEOFError</a></li>
        
          
          
          <li><a href="../Gem/MockGemUi/SystemExitException.html">Gem::MockGemUi::SystemExitException</a></li>
        
          
          
          <li><a href="../Gem/MockGemUi/TTY.html">Gem::MockGemUi::TTY</a></li>
        
          
          
          <li><a href="../Gem/MockGemUi/TermError.html">Gem::MockGemUi::TermError</a></li>
        
          
          
          <li><a href="../Gem/NameTuple.html">Gem::NameTuple</a></li>
        
          
          
          <li><a href="../Gem/NoAliasYAMLTree.html">Gem::NoAliasYAMLTree</a></li>
        
          
          
          <li><a href="../Gem/OperationNotSupportedError.html">Gem::OperationNotSupportedError</a></li>
        
          
          
          <li><a href="../Gem/Package/DigestIO.html">Gem::Package::DigestIO</a></li>
        
          
          
          <li><a href="../Gem/Package/Error.html">Gem::Package::Error</a></li>
        
          
          
          <li><a href="../Gem/Package/FormatError.html">Gem::Package::FormatError</a></li>
        
          
          
          <li><a href="../Gem/Package/NonSeekableIO.html">Gem::Package::NonSeekableIO</a></li>
        
          
          
          <li><a href="../Gem/Package/Old.html">Gem::Package::Old</a></li>
        
          
          
          <li><a href="../Gem/Package/PathError.html">Gem::Package::PathError</a></li>
        
          
          
          <li><a href="../Gem/Package/TarHeader.html">Gem::Package::TarHeader</a></li>
        
          
          
          <li><a href="../Gem/Package/TarInvalidError.html">Gem::Package::TarInvalidError</a></li>
        
          
          
          <li><a href="../Gem/Package/TarReader.html">Gem::Package::TarReader</a></li>
        
          
          
          <li><a href="../Gem/Package/TarReader/Entry.html">Gem::Package::TarReader::Entry</a></li>
        
          
          
          <li><a href="../Gem/Package/TarReader/UnexpectedEOF.html">Gem::Package::TarReader::UnexpectedEOF</a></li>
        
          
          
          <li><a href="../Gem/Package/TarTestCase.html">Gem::Package::TarTestCase</a></li>
        
          
          
          <li><a href="../Gem/Package/TarWriter.html">Gem::Package::TarWriter</a></li>
        
          
          
          <li><a href="../Gem/Package/TarWriter/BoundedStream.html">Gem::Package::TarWriter::BoundedStream</a></li>
        
          
          
          <li><a href="../Gem/Package/TarWriter/FileOverflow.html">Gem::Package::TarWriter::FileOverflow</a></li>
        
          
          
          <li><a href="../Gem/Package/TarWriter/RestrictedStream.html">Gem::Package::TarWriter::RestrictedStream</a></li>
        
          
          
          <li><a href="../Gem/Package/TooLongFileName.html">Gem::Package::TooLongFileName</a></li>
        
          
          
          <li><a href="../Gem/PackageTask.html">Gem::PackageTask</a></li>
        
          
          
          <li><a href="../Gem/PathSupport.html">Gem::PathSupport</a></li>
        
          
          
          <li><a href="../Gem/Platform.html">Gem::Platform</a></li>
        
          
          
          <li><a href="../Gem/PlatformMismatch.html">Gem::PlatformMismatch</a></li>
        
          
          
          <li><a href="../Gem/RemoteError.html">Gem::RemoteError</a></li>
        
          
          
          <li><a href="../Gem/RemoteFetcher.html">Gem::RemoteFetcher</a></li>
        
          
          
          <li><a href="../Gem/RemoteFetcher/FetchError.html">Gem::RemoteFetcher::FetchError</a></li>
        
          
          
          <li><a href="../Gem/RemoteFetcher/UnknownHostError.html">Gem::RemoteFetcher::UnknownHostError</a></li>
        
          
          
          <li><a href="../Gem/RemoteInstallationCancelled.html">Gem::RemoteInstallationCancelled</a></li>
        
          
          
          <li><a href="../Gem/RemoteInstallationSkipped.html">Gem::RemoteInstallationSkipped</a></li>
        
          
          
          <li><a href="../Gem/RemoteSourceException.html">Gem::RemoteSourceException</a></li>
        
          
          
          <li><a href="../Gem/RequestSet.html">Gem::RequestSet</a></li>
        
          
          
          <li><a href="../Gem/RequestSet/GemDependencyAPI.html">Gem::RequestSet::GemDependencyAPI</a></li>
        
          
          
          <li><a href="../Gem/RequestSet/Lockfile.html">Gem::RequestSet::Lockfile</a></li>
        
          
          
          <li><a href="../Gem/RequestSet/Lockfile/ParseError.html">Gem::RequestSet::Lockfile::ParseError</a></li>
        
          
          
          <li><a href="../Gem/RequestSet/Lockfile/Parser.html">Gem::RequestSet::Lockfile::Parser</a></li>
        
          
          
          <li><a href="../Gem/RequestSet/Lockfile/Tokenizer.html">Gem::RequestSet::Lockfile::Tokenizer</a></li>
        
          
          
          <li><a href="../Gem/Requirement.html">Gem::Requirement</a></li>
        
          
          
          <li><a href="../Gem/Requirement/BadRequirementError.html">Gem::Requirement::BadRequirementError</a></li>
        
          
          
          <li><a href="../Gem/Resolver.html">Gem::Resolver</a></li>
        
          
          
          <li><a href="../Gem/Resolver/APISet.html">Gem::Resolver::APISet</a></li>
        
          
          
          <li><a href="../Gem/Resolver/APISpecification.html">Gem::Resolver::APISpecification</a></li>
        
          
          
          <li><a href="../Gem/Resolver/ActivationRequest.html">Gem::Resolver::ActivationRequest</a></li>
        
          
          
          <li><a href="../Gem/Resolver/BestSet.html">Gem::Resolver::BestSet</a></li>
        
          
          
          <li><a href="../Gem/Resolver/ComposedSet.html">Gem::Resolver::ComposedSet</a></li>
        
          
          
          <li><a href="../Gem/Resolver/Conflict.html">Gem::Resolver::Conflict</a></li>
        
          
          
          <li><a href="../Gem/Resolver/CurrentSet.html">Gem::Resolver::CurrentSet</a></li>
        
          
          
          <li><a href="../Gem/Resolver/DependencyRequest.html">Gem::Resolver::DependencyRequest</a></li>
        
          
          
          <li><a href="../Gem/Resolver/GitSet.html">Gem::Resolver::GitSet</a></li>
        
          
          
          <li><a href="../Gem/Resolver/GitSpecification.html">Gem::Resolver::GitSpecification</a></li>
        
          
          
          <li><a href="../Gem/Resolver/IndexSet.html">Gem::Resolver::IndexSet</a></li>
        
          
          
          <li><a href="../Gem/Resolver/IndexSpecification.html">Gem::Resolver::IndexSpecification</a></li>
        
          
          
          <li><a href="../Gem/Resolver/InstalledSpecification.html">Gem::Resolver::InstalledSpecification</a></li>
        
          
          
          <li><a href="../Gem/Resolver/InstallerSet.html">Gem::Resolver::InstallerSet</a></li>
        
          
          
          <li><a href="../Gem/Resolver/LocalSpecification.html">Gem::Resolver::LocalSpecification</a></li>
        
          
          
          <li><a href="../Gem/Resolver/LockSet.html">Gem::Resolver::LockSet</a></li>
        
          
          
          <li><a href="../Gem/Resolver/LockSpecification.html">Gem::Resolver::LockSpecification</a></li>
        
          
          
          <li><a href="../Gem/Resolver/Molinillo.html">Gem::Resolver::Molinillo</a></li>
        
          
          
          <li><a href="../Gem/Resolver/Molinillo/CircularDependencyError.html">Gem::Resolver::Molinillo::CircularDependencyError</a></li>
        
          
          
          <li><a href="../Gem/Resolver/Molinillo/Delegates.html">Gem::Resolver::Molinillo::Delegates</a></li>
        
          
          
          <li><a href="../Gem/Resolver/Molinillo/Delegates/ResolutionState.html">Gem::Resolver::Molinillo::Delegates::ResolutionState</a></li>
        
          
          
          <li><a href="../Gem/Resolver/Molinillo/Delegates/SpecificationProvider.html">Gem::Resolver::Molinillo::Delegates::SpecificationProvider</a></li>
        
          
          
          <li><a href="../Gem/Resolver/Molinillo/DependencyGraph.html">Gem::Resolver::Molinillo::DependencyGraph</a></li>
        
          
          
          <li><a href="../Gem/Resolver/Molinillo/DependencyGraph/Action.html">Gem::Resolver::Molinillo::DependencyGraph::Action</a></li>
        
          
          
          <li><a href="../Gem/Resolver/Molinillo/DependencyGraph/AddEdgeNoCircular.html">Gem::Resolver::Molinillo::DependencyGraph::AddEdgeNoCircular</a></li>
        
          
          
          <li><a href="../Gem/Resolver/Molinillo/DependencyGraph/DeleteEdge.html">Gem::Resolver::Molinillo::DependencyGraph::DeleteEdge</a></li>
        
          
          
          <li><a href="../Gem/Resolver/Molinillo/DependencyGraph/DetachVertexNamed.html">Gem::Resolver::Molinillo::DependencyGraph::DetachVertexNamed</a></li>
        
          
          
          <li><a href="../Gem/Resolver/Molinillo/DependencyGraph/Log.html">Gem::Resolver::Molinillo::DependencyGraph::Log</a></li>
        
          
          
          <li><a href="../Gem/Resolver/Molinillo/DependencyGraph/Tag.html">Gem::Resolver::Molinillo::DependencyGraph::Tag</a></li>
        
          
          
          <li><a href="../Gem/Resolver/Molinillo/DependencyGraph/Vertex.html">Gem::Resolver::Molinillo::DependencyGraph::Vertex</a></li>
        
          
          
          <li><a href="../Gem/Resolver/Molinillo/DependencyState.html">Gem::Resolver::Molinillo::DependencyState</a></li>
        
          
          
          <li><a href="../Gem/Resolver/Molinillo/NoSuchDependencyError.html">Gem::Resolver::Molinillo::NoSuchDependencyError</a></li>
        
          
          
          <li><a href="../Gem/Resolver/Molinillo/PossibilityState.html">Gem::Resolver::Molinillo::PossibilityState</a></li>
        
          
          
          <li><a href="../Gem/Resolver/Molinillo/ResolutionState.html">Gem::Resolver::Molinillo::ResolutionState</a></li>
        
          
          
          <li><a href="../Gem/Resolver/Molinillo/Resolver.html">Gem::Resolver::Molinillo::Resolver</a></li>
        
          
          
          <li><a href="../Gem/Resolver/Molinillo/Resolver/Resolution.html">Gem::Resolver::Molinillo::Resolver::Resolution</a></li>
        
          
          
          <li><a href="../Gem/Resolver/Molinillo/ResolverError.html">Gem::Resolver::Molinillo::ResolverError</a></li>
        
          
          
          <li><a href="../Gem/Resolver/Molinillo/SpecificationProvider.html">Gem::Resolver::Molinillo::SpecificationProvider</a></li>
        
          
          
          <li><a href="../Gem/Resolver/Molinillo/UI.html">Gem::Resolver::Molinillo::UI</a></li>
        
          
          
          <li><a href="../Gem/Resolver/Molinillo/VersionConflict.html">Gem::Resolver::Molinillo::VersionConflict</a></li>
        
          
          
          <li><a href="../Gem/Resolver/RequirementList.html">Gem::Resolver::RequirementList</a></li>
        
          
          
          <li><a href="../Gem/Resolver/Set.html">Gem::Resolver::Set</a></li>
        
          
          
          <li><a href="../Gem/Resolver/SourceSet.html">Gem::Resolver::SourceSet</a></li>
        
          
          
          <li><a href="../Gem/Resolver/SpecSpecification.html">Gem::Resolver::SpecSpecification</a></li>
        
          
          
          <li><a href="../Gem/Resolver/Specification.html">Gem::Resolver::Specification</a></li>
        
          
          
          <li><a href="../Gem/Resolver/Stats.html">Gem::Resolver::Stats</a></li>
        
          
          
          <li><a href="../Gem/Resolver/VendorSet.html">Gem::Resolver::VendorSet</a></li>
        
          
          
          <li><a href="../Gem/Resolver/VendorSpecification.html">Gem::Resolver::VendorSpecification</a></li>
        
          
          
          <li><a href="../Gem/RubyVersionMismatch.html">Gem::RubyVersionMismatch</a></li>
        
          
          
          <li><a href="../Gem/RuntimeRequirementNotMetError.html">Gem::RuntimeRequirementNotMetError</a></li>
        
          
          
          <li><a href="../Gem/S3URISigner.html">Gem::S3URISigner</a></li>
        
          
          
          <li><a href="../Gem/S3URISigner/ConfigurationError.html">Gem::S3URISigner::ConfigurationError</a></li>
        
          
          
          <li><a href="../Gem/S3URISigner/InstanceProfileError.html">Gem::S3URISigner::InstanceProfileError</a></li>
        
          
          
          <li><a href="../Gem/SafeYAML.html">Gem::SafeYAML</a></li>
        
          
          
          <li><a href="../Gem/Security.html">Gem::Security</a></li>
        
          
          
          <li><a href="../Gem/Security/Exception.html">Gem::Security::Exception</a></li>
        
          
          
          <li><a href="../Gem/Security/Policy.html">Gem::Security::Policy</a></li>
        
          
          
          <li><a href="../Gem/Security/Signer.html">Gem::Security::Signer</a></li>
        
          
          
          <li><a href="../Gem/Security/TrustDir.html">Gem::Security::TrustDir</a></li>
        
          
          
          <li><a href="../Gem/SecurityOption.html">Gem::SecurityOption</a></li>
        
          
          
          <li><a href="../Gem/Server.html">Gem::Server</a></li>
        
          
          
          <li><a href="../Gem/SilentUI.html">Gem::SilentUI</a></li>
        
          
          
          <li><a href="../Gem/Source.html">Gem::Source</a></li>
        
          
          
          <li><a href="../Gem/Source/Git.html">Gem::Source::Git</a></li>
        
          
          
          <li><a href="../Gem/Source/Installed.html">Gem::Source::Installed</a></li>
        
          
          
          <li><a href="../Gem/Source/Local.html">Gem::Source::Local</a></li>
        
          
          
          <li><a href="../Gem/Source/Lock.html">Gem::Source::Lock</a></li>
        
          
          
          <li><a href="../Gem/Source/SpecificFile.html">Gem::Source::SpecificFile</a></li>
        
          
          
          <li><a href="../Gem/Source/Vendor.html">Gem::Source::Vendor</a></li>
        
          
          
          <li><a href="../Gem/SourceFetchProblem.html">Gem::SourceFetchProblem</a></li>
        
          
          
          <li><a href="../Gem/SourceList.html">Gem::SourceList</a></li>
        
          
          
          <li><a href="../Gem/SpecFetcher.html">Gem::SpecFetcher</a></li>
        
          
          
          <li><a href="../Gem/SpecificGemNotFoundException.html">Gem::SpecificGemNotFoundException</a></li>
        
          
          
          <li><a href="../Gem/Specification.html">Gem::Specification</a></li>
        
          
          
          <li><a href="../Gem/SpecificationPolicy.html">Gem::SpecificationPolicy</a></li>
        
          
          
          <li><a href="../Gem/StreamUI.html">Gem::StreamUI</a></li>
        
          
          
          <li><a href="../Gem/StreamUI/SilentDownloadReporter.html">Gem::StreamUI::SilentDownloadReporter</a></li>
        
          
          
          <li><a href="../Gem/StreamUI/SilentProgressReporter.html">Gem::StreamUI::SilentProgressReporter</a></li>
        
          
          
          <li><a href="../Gem/StreamUI/SimpleProgressReporter.html">Gem::StreamUI::SimpleProgressReporter</a></li>
        
          
          
          <li><a href="../Gem/StreamUI/ThreadedDownloadReporter.html">Gem::StreamUI::ThreadedDownloadReporter</a></li>
        
          
          
          <li><a href="../Gem/StreamUI/VerboseProgressReporter.html">Gem::StreamUI::VerboseProgressReporter</a></li>
        
          
          
          <li><a href="../Gem/StubSpecification.html">Gem::StubSpecification</a></li>
        
          
          
          <li><a href="../Gem/SystemExitException.html">Gem::SystemExitException</a></li>
        
          
          
          <li><a href="../Gem/TestCase.html">Gem::TestCase</a></li>
        
          
          
          <li><a href="../Gem/TestCase/SpecFetcherSetup.html">Gem::TestCase::SpecFetcherSetup</a></li>
        
          
          
          <li><a href="../Gem/TestCase/StaticSet.html">Gem::TestCase::StaticSet</a></li>
        
          
          
          <li><a href="../Gem/Text.html">Gem::Text</a></li>
        
          
          
          <li><a href="../Gem/UninstallError.html">Gem::UninstallError</a></li>
        
          
          
          <li><a href="../Gem/Uninstaller.html">Gem::Uninstaller</a></li>
        
          
          
          <li><a href="../Gem/UnsatisfiableDependencyError.html">Gem::UnsatisfiableDependencyError</a></li>
        
          
          
          <li><a href="../Gem/UriFormatter.html">Gem::UriFormatter</a></li>
        
          
          
          <li><a href="../Gem/UriParser.html">Gem::UriParser</a></li>
        
          
          
          <li><a href="../Gem/UriParsing.html">Gem::UriParsing</a></li>
        
          
          
          <li><a href="../Gem/UserInteraction.html">Gem::UserInteraction</a></li>
        
          
          
          <li><a href="../Gem/Util.html">Gem::Util</a></li>
        
          
          
          <li><a href="../Gem/Validator.html">Gem::Validator</a></li>
        
          
          
          <li><a href="../Gem/VerificationError.html">Gem::VerificationError</a></li>
        
          
          
          <li><a href="../Gem/Version.html">Gem::Version</a></li>
        
          
          
          <li><a href="../Gem/VersionOption.html">Gem::VersionOption</a></li>
        
          
          
          <li><a href="../Kernel.html">Kernel</a></li>
        
          
          
          <li><a href="../Object.html">Object</a></li>
        
          
          
          <li><a href="../TempIO.html">TempIO</a></li>
        
          
          
          <li><a href="../YAML/Syck.html">YAML::Syck</a></li>
        
          
          
          <li><a href="../YAML/Syck.html">YAML::Syck</a></li>
        
        </ul>
        <div id="no-class-search-results" style="display: none;">No matching classes.</div>
      </div>

      
    </div>
  </div> <!-- metadata -->
  <div class='adzbox'  id="azk83167">
    
  </div> 
  <div id="documentation">
    <h1 class="class">Gem::TestCase</h1>

    <div id="description" class="description">
      
<p>RubyGemTestCase provides a variety of methods for testing rubygems and gem-related behavior in a sandbox.  Through RubyGemTestCase you can install and uninstall gems, fetch remote gems through a stub fetcher and be assured your normal set of gems is not affected.</p>

    </div><!-- description -->

    
    
    
    <div id="5Buntitled-5D" class="documentation-section">
      

      

      
      <!-- Constants -->
      <div id="constants-list" class="section">
        <h3 class="section-header">Constants</h3>
        <dl>
        
          <dt><a name="SPECIFICATIONS">SPECIFICATIONS</a></dt>
          
          <dd class="description"></dd>
          
        
          <dt><a name="TEST_PATH">TEST_PATH</a></dt>
          
          <dd class="description"></dd>
          
        
        </dl>
      </div>
      

      

      <!-- Methods -->
      
      <div id="public-class-method-details" class="method-section section">
        <h3 class="section-header">Public Class Methods</h3>

      
        <div id="java_platform-3F-method" class="method-detail ">
          <a name="method-c-java_platform-3F"></a>

          
          <div class="method-heading">
            <span class="method-name">java_platform?</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            <p>Is this test being run on a Java platform?</p>
            

            
            <div class="method-source-code" id="java_platform-3F-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rubygems/test_case.rb, line 1133</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">java_platform?</span>
  <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">java_platform?</span>
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- java_platform-3F-source -->
            
          </div>

          

          
        </div><!-- java_platform-3F-method -->
      
        <div id="make_command-method" class="method-detail ">
          <a name="method-c-make_command"></a>

          
          <div class="method-heading">
            <span class="method-name">make_command</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            <p>Returns the make command for the current platform. For versions of Ruby built on MS Windows with VC++ or Borland it will return &#39;nmake&#39;. On all other platforms, including Cygwin, it will return &#39;make&#39;.</p>
            

            
            <div class="method-source-code" id="make_command-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rubygems/test_case.rb, line 1165</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">make_command</span>
  <span class="ruby-constant">ENV</span>[<span class="ruby-string">&quot;make&quot;</span>] <span class="ruby-operator">||</span> <span class="ruby-constant">ENV</span>[<span class="ruby-string">&quot;MAKE&quot;</span>] <span class="ruby-operator">||</span> (<span class="ruby-identifier">vc_windows?</span> <span class="ruby-operator">?</span> <span class="ruby-string">&#39;nmake&#39;</span> <span class="ruby-operator">:</span> <span class="ruby-string">&#39;make&#39;</span>)
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- make_command-source -->
            
          </div>

          

          
        </div><!-- make_command-method -->
      
        <div id="process_based_port-method" class="method-detail ">
          <a name="method-c-process_based_port"></a>

          
          <div class="method-heading">
            <span class="method-name">process_based_port</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            <p>Allows tests to use a random (but controlled) port number instead of a hardcoded one. This helps CI tools when running parallels builds on the same builder slave.</p>
            

            
            <div class="method-source-code" id="process_based_port-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rubygems/test_case.rb, line 1198</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">process_based_port</span>
  <span class="ruby-identifier">@@process_based_port</span> <span class="ruby-operator">||=</span> <span class="ruby-value">8000</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">$$</span> <span class="ruby-operator">%</span> <span class="ruby-value">1000</span>
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- process_based_port-source -->
            
          </div>

          

          
        </div><!-- process_based_port-method -->
      
        <div id="rubybin-method" class="method-detail ">
          <a name="method-c-rubybin"></a>

          
          <div class="method-heading">
            <span class="method-name">rubybin</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            <p>Finds the path to the Ruby executable</p>
            

            
            <div class="method-source-code" id="rubybin-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rubygems/test_case.rb, line 1231</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">rubybin</span>
  <span class="ruby-identifier">ruby</span> = <span class="ruby-constant">ENV</span>[<span class="ruby-string">&quot;RUBY&quot;</span>]
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">ruby</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">ruby</span>
  <span class="ruby-identifier">ruby</span> = <span class="ruby-string">&quot;ruby&quot;</span>
  <span class="ruby-identifier">rubyexe</span> = <span class="ruby-node">&quot;#{ruby}.exe&quot;</span>

  <span class="ruby-value">3</span>.<span class="ruby-identifier">times</span> <span class="ruby-keyword">do</span>
    <span class="ruby-keyword">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span> <span class="ruby-identifier">ruby</span> <span class="ruby-keyword">and</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">executable?</span> <span class="ruby-identifier">ruby</span> <span class="ruby-keyword">and</span> <span class="ruby-operator">!</span><span class="ruby-constant">File</span>.<span class="ruby-identifier">directory?</span> <span class="ruby-identifier">ruby</span>
      <span class="ruby-keyword">return</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-identifier">ruby</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span> <span class="ruby-identifier">rubyexe</span> <span class="ruby-keyword">and</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">executable?</span> <span class="ruby-identifier">rubyexe</span>
      <span class="ruby-keyword">return</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-identifier">rubyexe</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">ruby</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">&quot;..&quot;</span>, <span class="ruby-identifier">ruby</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">begin</span>
    <span class="ruby-identifier">require</span> <span class="ruby-string">&quot;rbconfig&quot;</span>
    <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-constant">RbConfig</span><span class="ruby-operator">::</span><span class="ruby-constant">CONFIG</span>[<span class="ruby-string">&quot;bindir&quot;</span>],
              <span class="ruby-constant">RbConfig</span><span class="ruby-operator">::</span><span class="ruby-constant">CONFIG</span>[<span class="ruby-string">&quot;ruby_install_name&quot;</span>] <span class="ruby-operator">+</span>
              <span class="ruby-constant">RbConfig</span><span class="ruby-operator">::</span><span class="ruby-constant">CONFIG</span>[<span class="ruby-string">&quot;EXEEXT&quot;</span>])
  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">LoadError</span>
    <span class="ruby-string">&quot;ruby&quot;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- rubybin-source -->
            
          </div>

          

          
        </div><!-- rubybin-method -->
      
        <div id="vc_windows-3F-method" class="method-detail ">
          <a name="method-c-vc_windows-3F"></a>

          
          <div class="method-heading">
            <span class="method-name">vc_windows?</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            <p>Returns whether or not we&#39;re on a version of Ruby built with VC++ (or Borland) versus Cygwin, Mingw, etc.</p>
            

            
            <div class="method-source-code" id="vc_windows-3F-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rubygems/test_case.rb, line 1148</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">vc_windows?</span>
  <span class="ruby-constant">RUBY_PLATFORM</span>.<span class="ruby-identifier">match</span>(<span class="ruby-string">&#39;mswin&#39;</span>)
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- vc_windows-3F-source -->
            
          </div>

          

          
        </div><!-- vc_windows-3F-method -->
      
        <div id="win_platform-3F-method" class="method-detail ">
          <a name="method-c-win_platform-3F"></a>

          
          <div class="method-heading">
            <span class="method-name">win_platform?</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            <p>Is this test being run on a Windows platform?</p>
            

            
            <div class="method-source-code" id="win_platform-3F-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rubygems/test_case.rb, line 1119</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">win_platform?</span>
  <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">win_platform?</span>
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- win_platform-3F-source -->
            
          </div>

          

          
        </div><!-- win_platform-3F-method -->
      
      </div><!-- public-class-method-details -->
    
      <div id="public-instance-method-details" class="method-section section">
        <h3 class="section-header">Public Instance Methods</h3>

      
        <div id="add_to_fetcher-method" class="method-detail ">
          <a name="method-i-add_to_fetcher"></a>

          
          <div class="method-heading">
            <span class="method-name">add_to_fetcher</span><span
              class="method-args">(spec, path=nil, repo=@gem_repo)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            <p>Add <code>spec</code> to +@fetcher+ serving the data in the file <code>path</code>. <code>repo</code> indicates which repo to make <code>spec</code> appear to be in.</p>
            

            
            <div class="method-source-code" id="add_to_fetcher-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rubygems/test_case.rb, line 998</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">add_to_fetcher</span>(<span class="ruby-identifier">spec</span>, <span class="ruby-identifier">path</span>=<span class="ruby-keyword">nil</span>, <span class="ruby-identifier">repo</span>=<span class="ruby-ivar">@gem_repo</span>)
  <span class="ruby-identifier">path</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">cache_file</span>
  <span class="ruby-ivar">@fetcher</span>.<span class="ruby-identifier">data</span>[<span class="ruby-node">&quot;#{@gem_repo}gems/#{spec.file_name}&quot;</span>] = <span class="ruby-identifier">read_binary</span>(<span class="ruby-identifier">path</span>)
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- add_to_fetcher-source -->
            
          </div>

          

          
        </div><!-- add_to_fetcher-method -->
      
        <div id="all_spec_names-method" class="method-detail ">
          <a name="method-i-all_spec_names"></a>

          
          <div class="method-heading">
            <span class="method-name">all_spec_names</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            
            

            
            <div class="method-source-code" id="all_spec_names-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rubygems/test_case.rb, line 647</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">all_spec_names</span>
  <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">Specification</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:full_name</span>)
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- all_spec_names-source -->
            
          </div>

          

          
        </div><!-- all_spec_names-method -->
      
        <div id="ask_if_ok-method" class="method-detail ">
          <a name="method-i-ask_if_ok"></a>

          
          <div class="method-heading">
            <span class="method-name">ask_if_ok</span><span
              class="method-args">(spec)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            
            

            
            <div class="method-source-code" id="ask_if_ok-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rubygems/test_case.rb, line 600</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">ask_if_ok</span>(<span class="ruby-identifier">spec</span>)
  <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- ask_if_ok-source -->
            
          </div>

          

          
        </div><!-- ask_if_ok-method -->
      
        <div id="assert_activate-method" class="method-detail ">
          <a name="method-i-assert_activate"></a>

          
          <div class="method-heading">
            <span class="method-name">assert_activate</span><span
              class="method-args">(expected, *specs)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            
            

            
            <div class="method-source-code" id="assert_activate-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rubygems/test_case.rb, line 101</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">assert_activate</span>(<span class="ruby-identifier">expected</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">specs</span>)
  <span class="ruby-identifier">specs</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">spec</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">case</span> <span class="ruby-identifier">spec</span>
    <span class="ruby-keyword">when</span> <span class="ruby-constant">String</span> <span class="ruby-keyword">then</span>
      <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">Specification</span>.<span class="ruby-identifier">find_by_name</span>(<span class="ruby-identifier">spec</span>).<span class="ruby-identifier">activate</span>
    <span class="ruby-keyword">when</span> <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">Specification</span> <span class="ruby-keyword">then</span>
      <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">activate</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">flunk</span> <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">inspect</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">loaded</span> = <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">loaded_specs</span>.<span class="ruby-identifier">values</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:full_name</span>)

  <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">sort</span>, <span class="ruby-identifier">loaded</span>.<span class="ruby-identifier">sort</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">expected</span>
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- assert_activate-source -->
            
          </div>

          

          
        </div><!-- assert_activate-method -->
      
        <div id="assert_contains_make_command-method" class="method-detail ">
          <a name="method-i-assert_contains_make_command"></a>

          
          <div class="method-heading">
            <span class="method-name">assert_contains_make_command</span><span
              class="method-args">(target, output, msg = nil)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            
            

            
            <div class="method-source-code" id="assert_contains_make_command-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rubygems/test_case.rb, line 251</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">assert_contains_make_command</span>(<span class="ruby-identifier">target</span>, <span class="ruby-identifier">output</span>, <span class="ruby-identifier">msg</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">output</span>.<span class="ruby-identifier">match</span>(<span class="ruby-regexp">/\n/</span>)
    <span class="ruby-identifier">msg</span> = <span class="ruby-identifier">message</span>(<span class="ruby-identifier">msg</span>) <span class="ruby-keyword">do</span>
      <span class="ruby-string">&#39;Expected output containing make command &quot;%s&quot;: %s&#39;</span> <span class="ruby-operator">%</span> [
        (<span class="ruby-string">&#39;%s %s&#39;</span> <span class="ruby-operator">%</span> [<span class="ruby-identifier">make_command</span>, <span class="ruby-identifier">target</span>]).<span class="ruby-identifier">rstrip</span>,
        <span class="ruby-identifier">output</span>.<span class="ruby-identifier">inspect</span>
      ]
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">msg</span> = <span class="ruby-identifier">message</span>(<span class="ruby-identifier">msg</span>) <span class="ruby-keyword">do</span>
      <span class="ruby-string">&#39;Expected make command &quot;%s&quot;: %s&#39;</span> <span class="ruby-operator">%</span> [
        (<span class="ruby-string">&#39;%s %s&#39;</span> <span class="ruby-operator">%</span> [<span class="ruby-identifier">make_command</span>, <span class="ruby-identifier">target</span>]).<span class="ruby-identifier">rstrip</span>,
        <span class="ruby-identifier">output</span>.<span class="ruby-identifier">inspect</span>
      ]
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">assert</span> <span class="ruby-identifier">scan_make_command_lines</span>(<span class="ruby-identifier">output</span>).<span class="ruby-identifier">any?</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">line</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">make</span> = <span class="ruby-identifier">parse_make_command_line</span>(<span class="ruby-identifier">line</span>)

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">make</span>[<span class="ruby-value">:targets</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">target</span>)
      <span class="ruby-keyword">yield</span> <span class="ruby-identifier">make</span>, <span class="ruby-identifier">line</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">block_given?</span>
      <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-keyword">false</span>
    <span class="ruby-keyword">end</span>
  }, <span class="ruby-identifier">msg</span>
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- assert_contains_make_command-source -->
            
          </div>

          

          
        </div><!-- assert_contains_make_command-method -->
      
        <div id="assert_directory_exists-method" class="method-detail ">
          <a name="method-i-assert_directory_exists"></a>

          
          <div class="method-heading">
            <span class="method-name">assert_directory_exists</span><span
              class="method-args">(path, msg = nil)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            
            

            
            <div class="method-source-code" id="assert_directory_exists-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rubygems/test_case.rb, line 124</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">assert_directory_exists</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">msg</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">msg</span> = <span class="ruby-identifier">message</span>(<span class="ruby-identifier">msg</span>) { <span class="ruby-node">&quot;Expected path &#39;#{path}&#39; to be a directory&quot;</span> }
  <span class="ruby-identifier">assert_path_exists</span> <span class="ruby-identifier">path</span>
  <span class="ruby-identifier">assert</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">directory?</span>(<span class="ruby-identifier">path</span>), <span class="ruby-identifier">msg</span>
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- assert_directory_exists-source -->
            
          </div>

          

          
        </div><!-- assert_directory_exists-method -->
      
        <div id="assert_path_exists-method" class="method-detail ">
          <a name="method-i-assert_path_exists"></a>

          
          <div class="method-heading">
            <span class="method-name">assert_path_exists</span><span
              class="method-args">(path, msg = nil)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            <p>TODO: move to minitest</p>
            

            
            <div class="method-source-code" id="assert_path_exists-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rubygems/test_case.rb, line 119</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">assert_path_exists</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">msg</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">msg</span> = <span class="ruby-identifier">message</span>(<span class="ruby-identifier">msg</span>) { <span class="ruby-node">&quot;Expected path &#39;#{path}&#39; to exist&quot;</span> }
  <span class="ruby-identifier">assert</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">path</span>), <span class="ruby-identifier">msg</span>
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- assert_path_exists-source -->
            
          </div>

          

          
        </div><!-- assert_path_exists-method -->
      
        <div id="bindir-method" class="method-detail ">
          <a name="method-i-bindir"></a>

          
          <div class="method-heading">
            <span class="method-name">bindir</span><span
              class="method-args">(value)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            <p>Sets the bindir entry in RbConfig::CONFIG to <code>value</code> and restores the original value when the block ends</p>
            

            
            <div class="method-source-code" id="bindir-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rubygems/test_case.rb, line 173</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">bindir</span>(<span class="ruby-identifier">value</span>)
  <span class="ruby-identifier">with_clean_path_to_ruby</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">bindir</span> = <span class="ruby-constant">RbConfig</span><span class="ruby-operator">::</span><span class="ruby-constant">CONFIG</span>[<span class="ruby-string">&#39;bindir&#39;</span>]

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">value</span>
      <span class="ruby-constant">RbConfig</span><span class="ruby-operator">::</span><span class="ruby-constant">CONFIG</span>[<span class="ruby-string">&#39;bindir&#39;</span>] = <span class="ruby-identifier">value</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-constant">RbConfig</span><span class="ruby-operator">::</span><span class="ruby-constant">CONFIG</span>.<span class="ruby-identifier">delete</span> <span class="ruby-string">&#39;bindir&#39;</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">begin</span>
      <span class="ruby-keyword">yield</span>
    <span class="ruby-keyword">ensure</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">bindir</span>
        <span class="ruby-constant">RbConfig</span><span class="ruby-operator">::</span><span class="ruby-constant">CONFIG</span>[<span class="ruby-string">&#39;bindir&#39;</span>] = <span class="ruby-identifier">bindir</span>
      <span class="ruby-keyword">else</span>
        <span class="ruby-constant">RbConfig</span><span class="ruby-operator">::</span><span class="ruby-constant">CONFIG</span>.<span class="ruby-identifier">delete</span> <span class="ruby-string">&#39;bindir&#39;</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- bindir-source -->
            
          </div>

          

          
        </div><!-- bindir-method -->
      
        <div id="build_rake_in-method" class="method-detail ">
          <a name="method-i-build_rake_in"></a>

          
          <div class="method-heading">
            <span class="method-name">build_rake_in</span><span
              class="method-args">(good=true)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            <p>Allows the proper version of <code>rake</code> to be used for the test.</p>
            

            
            <div class="method-source-code" id="build_rake_in-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rubygems/test_case.rb, line 1212</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">build_rake_in</span>(<span class="ruby-identifier">good</span>=<span class="ruby-keyword">true</span>)
  <span class="ruby-identifier">gem_ruby</span> = <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">ruby</span>
  <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">ruby</span> = <span class="ruby-identifier">@@ruby</span>
  <span class="ruby-identifier">env_rake</span> = <span class="ruby-constant">ENV</span>[<span class="ruby-string">&quot;rake&quot;</span>]
  <span class="ruby-identifier">rake</span> = (<span class="ruby-identifier">good</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">@@good_rake</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">@@bad_rake</span>)
  <span class="ruby-constant">ENV</span>[<span class="ruby-string">&quot;rake&quot;</span>] = <span class="ruby-identifier">rake</span>
  <span class="ruby-keyword">yield</span> <span class="ruby-identifier">rake</span>
<span class="ruby-keyword">ensure</span>
  <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">ruby</span> = <span class="ruby-identifier">gem_ruby</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">env_rake</span>
    <span class="ruby-constant">ENV</span>[<span class="ruby-string">&quot;rake&quot;</span>] = <span class="ruby-identifier">env_rake</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-constant">ENV</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-string">&quot;rake&quot;</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- build_rake_in-source -->
            
          </div>

          

          
        </div><!-- build_rake_in-method -->
      
        <div id="common_installer_setup-method" class="method-detail ">
          <a name="method-i-common_installer_setup"></a>

          
          <div class="method-heading">
            <span class="method-name">common_installer_setup</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            
            

            
            <div class="method-source-code" id="common_installer_setup-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rubygems/test_case.rb, line 471</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">common_installer_setup</span>
  <span class="ruby-identifier">common_installer_teardown</span>

  <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">post_build</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">installer</span><span class="ruby-operator">|</span>
    <span class="ruby-ivar">@post_build_hook_arg</span> = <span class="ruby-identifier">installer</span>
    <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">post_install</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">installer</span><span class="ruby-operator">|</span>
    <span class="ruby-ivar">@post_install_hook_arg</span> = <span class="ruby-identifier">installer</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">post_uninstall</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">uninstaller</span><span class="ruby-operator">|</span>
    <span class="ruby-ivar">@post_uninstall_hook_arg</span> = <span class="ruby-identifier">uninstaller</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">pre_install</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">installer</span><span class="ruby-operator">|</span>
    <span class="ruby-ivar">@pre_install_hook_arg</span> = <span class="ruby-identifier">installer</span>
    <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">pre_uninstall</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">uninstaller</span><span class="ruby-operator">|</span>
    <span class="ruby-ivar">@pre_uninstall_hook_arg</span> = <span class="ruby-identifier">uninstaller</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- common_installer_setup-source -->
            
          </div>

          

          
        </div><!-- common_installer_setup-method -->
      
        <div id="common_installer_teardown-method" class="method-detail ">
          <a name="method-i-common_installer_teardown"></a>

          
          <div class="method-heading">
            <span class="method-name">common_installer_teardown</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            
            

            
            <div class="method-source-code" id="common_installer_teardown-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rubygems/test_case.rb, line 497</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">common_installer_teardown</span>
  <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">post_build_hooks</span>.<span class="ruby-identifier">clear</span>
  <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">post_install_hooks</span>.<span class="ruby-identifier">clear</span>
  <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">done_installing_hooks</span>.<span class="ruby-identifier">clear</span>
  <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">post_reset_hooks</span>.<span class="ruby-identifier">clear</span>
  <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">post_uninstall_hooks</span>.<span class="ruby-identifier">clear</span>
  <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">pre_install_hooks</span>.<span class="ruby-identifier">clear</span>
  <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">pre_reset_hooks</span>.<span class="ruby-identifier">clear</span>
  <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">pre_uninstall_hooks</span>.<span class="ruby-identifier">clear</span>
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- common_installer_teardown-source -->
            
          </div>

          

          
        </div><!-- common_installer_teardown-method -->
      
        <div id="enable_shared-method" class="method-detail ">
          <a name="method-i-enable_shared"></a>

          
          <div class="method-heading">
            <span class="method-name">enable_shared</span><span
              class="method-args">(value)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            <p>Sets the ENABLE_SHARED entry in RbConfig::CONFIG to <code>value</code> and restores the original value when the block ends</p>
            

            
            <div class="method-source-code" id="enable_shared-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rubygems/test_case.rb, line 134</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">enable_shared</span>(<span class="ruby-identifier">value</span>)
  <span class="ruby-identifier">enable_shared</span> = <span class="ruby-constant">RbConfig</span><span class="ruby-operator">::</span><span class="ruby-constant">CONFIG</span>[<span class="ruby-string">&#39;ENABLE_SHARED&#39;</span>]
  <span class="ruby-constant">RbConfig</span><span class="ruby-operator">::</span><span class="ruby-constant">CONFIG</span>[<span class="ruby-string">&#39;ENABLE_SHARED&#39;</span>] = <span class="ruby-identifier">value</span>

  <span class="ruby-keyword">yield</span>
<span class="ruby-keyword">ensure</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">enable_shared</span>
    <span class="ruby-constant">RbConfig</span><span class="ruby-operator">::</span><span class="ruby-constant">CONFIG</span>[<span class="ruby-string">&#39;enable_shared&#39;</span>] = <span class="ruby-identifier">enable_shared</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-constant">RbConfig</span><span class="ruby-operator">::</span><span class="ruby-constant">CONFIG</span>.<span class="ruby-identifier">delete</span> <span class="ruby-string">&#39;enable_shared&#39;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- enable_shared-source -->
            
          </div>

          

          
        </div><!-- enable_shared-method -->
      
        <div id="exeext-method" class="method-detail ">
          <a name="method-i-exeext"></a>

          
          <div class="method-heading">
            <span class="method-name">exeext</span><span
              class="method-args">(value)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            <p>Sets the EXEEXT entry in RbConfig::CONFIG to <code>value</code> and restores the original value when the block ends</p>
            

            
            <div class="method-source-code" id="exeext-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rubygems/test_case.rb, line 199</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">exeext</span>(<span class="ruby-identifier">value</span>)
  <span class="ruby-identifier">exeext</span> = <span class="ruby-constant">RbConfig</span><span class="ruby-operator">::</span><span class="ruby-constant">CONFIG</span>[<span class="ruby-string">&#39;EXEEXT&#39;</span>]

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">value</span>
    <span class="ruby-constant">RbConfig</span><span class="ruby-operator">::</span><span class="ruby-constant">CONFIG</span>[<span class="ruby-string">&#39;EXEEXT&#39;</span>] = <span class="ruby-identifier">value</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-constant">RbConfig</span><span class="ruby-operator">::</span><span class="ruby-constant">CONFIG</span>.<span class="ruby-identifier">delete</span> <span class="ruby-string">&#39;EXEEXT&#39;</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">yield</span>
<span class="ruby-keyword">ensure</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">exeext</span>
    <span class="ruby-constant">RbConfig</span><span class="ruby-operator">::</span><span class="ruby-constant">CONFIG</span>[<span class="ruby-string">&#39;EXEEXT&#39;</span>] = <span class="ruby-identifier">exeext</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-constant">RbConfig</span><span class="ruby-operator">::</span><span class="ruby-constant">CONFIG</span>.<span class="ruby-identifier">delete</span> <span class="ruby-string">&#39;EXEEXT&#39;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- exeext-source -->
            
          </div>

          

          
        </div><!-- exeext-method -->
      
        <div id="git_gem-method" class="method-detail ">
          <a name="method-i-git_gem"></a>

          
          <div class="method-heading">
            <span class="method-name">git_gem</span><span
              class="method-args">(name = 'a', version = 1)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            <p>A <a href="TestCase.html#method-i-git_gem"><code>git_gem</code></a> is used with a gem dependencies file.  The gem created here has no files, just a gem specification for the given <code>name</code> and <code>version</code>.</p>

<p>Yields the <code>specification</code> to the block, if given</p>
            

            
            <div class="method-source-code" id="git_gem-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rubygems/test_case.rb, line 514</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">git_gem</span>(<span class="ruby-identifier">name</span> = <span class="ruby-string">&#39;a&#39;</span>, <span class="ruby-identifier">version</span> = <span class="ruby-value">1</span>)
  <span class="ruby-identifier">have_git?</span>

  <span class="ruby-identifier">directory</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span> <span class="ruby-string">&#39;git&#39;</span>, <span class="ruby-identifier">name</span>
  <span class="ruby-identifier">directory</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span> <span class="ruby-identifier">directory</span>

  <span class="ruby-identifier">git_spec</span> = <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">Specification</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">name</span>, <span class="ruby-identifier">version</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">specification</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">yield</span> <span class="ruby-identifier">specification</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">block_given?</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">mkdir_p</span> <span class="ruby-identifier">directory</span>

  <span class="ruby-identifier">gemspec</span> = <span class="ruby-node">&quot;#{name}.gemspec&quot;</span>

  <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">directory</span>, <span class="ruby-identifier">gemspec</span>), <span class="ruby-string">&#39;w&#39;</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">io</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">io</span>.<span class="ruby-identifier">write</span> <span class="ruby-identifier">git_spec</span>.<span class="ruby-identifier">to_ruby</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">head</span> = <span class="ruby-keyword">nil</span>

  <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">chdir</span> <span class="ruby-identifier">directory</span> <span class="ruby-keyword">do</span>
    <span class="ruby-keyword">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span> <span class="ruby-string">&#39;.git&#39;</span>
      <span class="ruby-identifier">system</span> <span class="ruby-ivar">@git</span>, <span class="ruby-string">&#39;init&#39;</span>, <span class="ruby-string">&#39;--quiet&#39;</span>
      <span class="ruby-identifier">system</span> <span class="ruby-ivar">@git</span>, <span class="ruby-string">&#39;config&#39;</span>, <span class="ruby-string">&#39;user.name&#39;</span>,  <span class="ruby-string">&#39;RubyGems Tests&#39;</span>
      <span class="ruby-identifier">system</span> <span class="ruby-ivar">@git</span>, <span class="ruby-string">&#39;config&#39;</span>, <span class="ruby-string">&#39;user.email&#39;</span>, <span class="ruby-string">&#39;rubygems@example&#39;</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">system</span> <span class="ruby-ivar">@git</span>, <span class="ruby-string">&#39;add&#39;</span>, <span class="ruby-identifier">gemspec</span>
    <span class="ruby-identifier">system</span> <span class="ruby-ivar">@git</span>, <span class="ruby-string">&#39;commit&#39;</span>, <span class="ruby-string">&#39;-a&#39;</span>, <span class="ruby-string">&#39;-m&#39;</span>, <span class="ruby-string">&#39;a non-empty commit message&#39;</span>, <span class="ruby-string">&#39;--quiet&#39;</span>
    <span class="ruby-identifier">head</span> = <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">Util</span>.<span class="ruby-identifier">popen</span>(<span class="ruby-ivar">@git</span>, <span class="ruby-string">&#39;rev-parse&#39;</span>, <span class="ruby-string">&#39;master&#39;</span>).<span class="ruby-identifier">strip</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">return</span> <span class="ruby-identifier">name</span>, <span class="ruby-identifier">git_spec</span>.<span class="ruby-identifier">version</span>, <span class="ruby-identifier">directory</span>, <span class="ruby-identifier">head</span>
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- git_gem-source -->
            
          </div>

          

          
        </div><!-- git_gem-method -->
      
        <div id="have_git-3F-method" class="method-detail ">
          <a name="method-i-have_git-3F"></a>

          
          <div class="method-heading">
            <span class="method-name">have_git?</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            <p>Skips this test unless you have a git executable</p>
            

            
            <div class="method-source-code" id="have_git-3F-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rubygems/test_case.rb, line 552</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">have_git?</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">in_path?</span> <span class="ruby-ivar">@git</span>

  <span class="ruby-identifier">skip</span> <span class="ruby-string">&#39;cannot find git executable, use GIT environment variable to set&#39;</span>
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- have_git-3F-source -->
            
          </div>

          

          
        </div><!-- have_git-3F-method -->
      
        <div id="install_default_gems-method" class="method-detail ">
          <a name="method-i-install_default_gems"></a>

          
          <div class="method-heading">
            <span class="method-name">install_default_gems</span><span
              class="method-args">(*specs)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            <p>Installs the provided default specs including writing the spec file</p>
            

            
            <div class="method-source-code" id="install_default_gems-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rubygems/test_case.rb, line 747</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">install_default_gems</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">specs</span>)
  <span class="ruby-identifier">install_default_specs</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">specs</span>)

  <span class="ruby-identifier">specs</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">spec</span><span class="ruby-operator">|</span>
    <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span> <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">loaded_from</span>, <span class="ruby-string">&#39;w&#39;</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">io</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">io</span>.<span class="ruby-identifier">write</span> <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">to_ruby_for_cache</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- install_default_gems-source -->
            
          </div>

          

          
        </div><!-- install_default_gems-method -->
      
        <div id="install_default_specs-method" class="method-detail ">
          <a name="method-i-install_default_specs"></a>

          
          <div class="method-heading">
            <span class="method-name">install_default_specs</span><span
              class="method-args">(*specs)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            <p>Install the provided default specs</p>
            

            
            <div class="method-source-code" id="install_default_specs-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rubygems/test_case.rb, line 760</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">install_default_specs</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">specs</span>)
  <span class="ruby-identifier">specs</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">spec</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">installer</span> = <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">Installer</span>.<span class="ruby-identifier">for_spec</span>(<span class="ruby-identifier">spec</span>, <span class="ruby-value">:install_as_default</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-keyword">true</span>)
    <span class="ruby-identifier">installer</span>.<span class="ruby-identifier">install</span>
    <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">register_default_spec</span>(<span class="ruby-identifier">spec</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- install_default_specs-source -->
            
          </div>

          

          
        </div><!-- install_default_specs-method -->
      
        <div id="install_gem-method" class="method-detail ">
          <a name="method-i-install_gem"></a>

          
          <div class="method-heading">
            <span class="method-name">install_gem</span><span
              class="method-args">(spec, options = {})</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            <p>Builds and installs the <a href="Specification.html"><code>Gem::Specification</code></a> <code>spec</code></p>
            

            
            <div class="method-source-code" id="install_gem-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rubygems/test_case.rb, line 569</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">install_gem</span>(<span class="ruby-identifier">spec</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-identifier">require</span> <span class="ruby-string">&#39;rubygems/installer&#39;</span>

  <span class="ruby-identifier">gem</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span> <span class="ruby-ivar">@tempdir</span>, <span class="ruby-string">&quot;gems&quot;</span>, <span class="ruby-node">&quot;#{spec.full_name}.gem&quot;</span>

  <span class="ruby-keyword">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span> <span class="ruby-identifier">gem</span>
    <span class="ruby-identifier">use_ui</span> <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">MockGemUi</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword">do</span>
      <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">chdir</span> <span class="ruby-ivar">@tempdir</span> <span class="ruby-keyword">do</span>
        <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">Package</span>.<span class="ruby-identifier">build</span> <span class="ruby-identifier">spec</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">gem</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-ivar">@tempdir</span>, <span class="ruby-constant">File</span>.<span class="ruby-identifier">basename</span>(<span class="ruby-identifier">spec</span>.<span class="ruby-identifier">cache_file</span>)).<span class="ruby-identifier">tap</span>(<span class="ruby-operator">&amp;</span><span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">UNTAINT</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">Installer</span>.<span class="ruby-identifier">at</span>(<span class="ruby-identifier">gem</span>, <span class="ruby-identifier">options</span>.<span class="ruby-identifier">merge</span>({<span class="ruby-value">:wrappers</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-keyword">true</span>})).<span class="ruby-identifier">install</span>
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- install_gem-source -->
            
          </div>

          

          
        </div><!-- install_gem-method -->
      
        <div id="install_gem_user-method" class="method-detail ">
          <a name="method-i-install_gem_user"></a>

          
          <div class="method-heading">
            <span class="method-name">install_gem_user</span><span
              class="method-args">(spec)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            <p>Builds and installs the <a href="Specification.html"><code>Gem::Specification</code></a> <code>spec</code> into the user dir</p>
            

            
            <div class="method-source-code" id="install_gem_user-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rubygems/test_case.rb, line 590</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">install_gem_user</span>(<span class="ruby-identifier">spec</span>)
  <span class="ruby-identifier">install_gem</span> <span class="ruby-identifier">spec</span>, <span class="ruby-value">:user_install</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- install_gem_user-source -->
            
          </div>

          

          
        </div><!-- install_gem_user-method -->
      
        <div id="install_specs-method" class="method-detail ">
          <a name="method-i-install_specs"></a>

          
          <div class="method-heading">
            <span class="method-name">install_specs</span><span
              class="method-args">(*specs)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            <p>Install the provided specs</p>
            

            
            <div class="method-source-code" id="install_specs-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rubygems/test_case.rb, line 736</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">install_specs</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">specs</span>)
  <span class="ruby-identifier">specs</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">spec</span><span class="ruby-operator">|</span>
    <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">Installer</span>.<span class="ruby-identifier">for_spec</span>(<span class="ruby-identifier">spec</span>).<span class="ruby-identifier">install</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">searcher</span> = <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- install_specs-source -->
            
          </div>

          

          
        </div><!-- install_specs-method -->
      
        <div id="java_platform-3F-method" class="method-detail ">
          <a name="method-i-java_platform-3F"></a>

          
          <div class="method-heading">
            <span class="method-name">java_platform?</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            <p>Is this test being run on a Java platform?</p>
            

            
            <div class="method-source-code" id="java_platform-3F-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rubygems/test_case.rb, line 1140</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">java_platform?</span>
  <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">java_platform?</span>
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- java_platform-3F-source -->
            
          </div>

          

          
        </div><!-- java_platform-3F-method -->
      
        <div id="loaded_spec_names-method" class="method-detail ">
          <a name="method-i-loaded_spec_names"></a>

          
          <div class="method-heading">
            <span class="method-name">loaded_spec_names</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            
            

            
            <div class="method-source-code" id="loaded_spec_names-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rubygems/test_case.rb, line 768</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">loaded_spec_names</span>
  <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">loaded_specs</span>.<span class="ruby-identifier">values</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:full_name</span>).<span class="ruby-identifier">sort</span>
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- loaded_spec_names-source -->
            
          </div>

          

          
        </div><!-- loaded_spec_names-method -->
      
        <div id="make_command-method" class="method-detail ">
          <a name="method-i-make_command"></a>

          
          <div class="method-heading">
            <span class="method-name">make_command</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            <p>Returns the make command for the current platform. For versions of Ruby built on MS Windows with VC++ or Borland it will return &#39;nmake&#39;. On all other platforms, including Cygwin, it will return &#39;make&#39;.</p>
            

            
            <div class="method-source-code" id="make_command-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rubygems/test_case.rb, line 1174</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">make_command</span>
  <span class="ruby-constant">ENV</span>[<span class="ruby-string">&quot;make&quot;</span>] <span class="ruby-operator">||</span> <span class="ruby-constant">ENV</span>[<span class="ruby-string">&quot;MAKE&quot;</span>] <span class="ruby-operator">||</span> (<span class="ruby-identifier">vc_windows?</span> <span class="ruby-operator">?</span> <span class="ruby-string">&#39;nmake&#39;</span> <span class="ruby-operator">:</span> <span class="ruby-string">&#39;make&#39;</span>)
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- make_command-source -->
            
          </div>

          

          
        </div><!-- make_command-method -->
      
        <div id="mu_pp-method" class="method-detail ">
          <a name="method-i-mu_pp"></a>

          
          <div class="method-heading">
            <span class="method-name">mu_pp</span><span
              class="method-args">(obj)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            <p>Enables pretty-print for all tests</p>
            

            
            <div class="method-source-code" id="mu_pp-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rubygems/test_case.rb, line 609</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">mu_pp</span>(<span class="ruby-identifier">obj</span>)
  <span class="ruby-identifier">s</span> = <span class="ruby-constant">String</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-identifier">s</span> = <span class="ruby-constant">PP</span>.<span class="ruby-identifier">pp</span> <span class="ruby-identifier">obj</span>, <span class="ruby-identifier">s</span>
  <span class="ruby-identifier">s</span> = <span class="ruby-identifier">s</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-constant">Encoding</span>.<span class="ruby-identifier">default_external</span>)
  <span class="ruby-identifier">s</span>.<span class="ruby-identifier">chomp</span>
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- mu_pp-source -->
            
          </div>

          

          
        </div><!-- mu_pp-method -->
      
        <div id="new_default_spec-method" class="method-detail ">
          <a name="method-i-new_default_spec"></a>

          
          <div class="method-heading">
            <span class="method-name">new_default_spec</span><span
              class="method-args">(name, version, deps = nil, *files)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            
            

            
            <div class="method-source-code" id="new_default_spec-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rubygems/test_case.rb, line 786</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">new_default_spec</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">version</span>, <span class="ruby-identifier">deps</span> = <span class="ruby-keyword">nil</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">files</span>)
  <span class="ruby-identifier">spec</span> = <span class="ruby-identifier">util_spec</span> <span class="ruby-identifier">name</span>, <span class="ruby-identifier">version</span>, <span class="ruby-identifier">deps</span>

  <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">loaded_from</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-ivar">@default_spec_dir</span>, <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">spec_name</span>)
  <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">files</span> = <span class="ruby-identifier">files</span>

  <span class="ruby-identifier">lib_dir</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-ivar">@tempdir</span>, <span class="ruby-string">&quot;default_gems&quot;</span>, <span class="ruby-string">&quot;lib&quot;</span>)
  <span class="ruby-identifier">lib_dir</span>.<span class="ruby-identifier">instance_variable_set</span>(<span class="ruby-value">:@gem_prelude_index</span>, <span class="ruby-identifier">lib_dir</span>)
  <span class="ruby-identifier">$LOAD_PATH</span>.<span class="ruby-identifier">unshift</span>(<span class="ruby-identifier">lib_dir</span>)
  <span class="ruby-identifier">files</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">file</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">rb_path</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">lib_dir</span>, <span class="ruby-identifier">file</span>)
    <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">mkdir_p</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-identifier">rb_path</span>))
    <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">rb_path</span>, <span class="ruby-string">&quot;w&quot;</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">rb</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">rb</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;# #{file}&quot;</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">spec</span>
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- new_default_spec-source -->
            
          </div>

          

          
        </div><!-- new_default_spec-method -->
      
        <div id="nmake_found-3F-method" class="method-detail ">
          <a name="method-i-nmake_found-3F"></a>

          
          <div class="method-heading">
            <span class="method-name">nmake_found?</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            <p>Returns whether or not the nmake command could be found.</p>
            

            
            <div class="method-source-code" id="nmake_found-3F-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rubygems/test_case.rb, line 1181</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">nmake_found?</span>
  <span class="ruby-identifier">system</span>(<span class="ruby-string">&#39;nmake /? 1&gt;NUL 2&gt;&amp;1&#39;</span>)
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- nmake_found-3F-source -->
            
          </div>

          

          
        </div><!-- nmake_found-3F-method -->
      
        <div id="parse_make_command_line-method" class="method-detail ">
          <a name="method-i-parse_make_command_line"></a>

          
          <div class="method-heading">
            <span class="method-name">parse_make_command_line</span><span
              class="method-args">(line)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            
            

            
            <div class="method-source-code" id="parse_make_command_line-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rubygems/test_case.rb, line 227</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">parse_make_command_line</span>(<span class="ruby-identifier">line</span>)
  <span class="ruby-identifier">command</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span> = <span class="ruby-identifier">line</span>.<span class="ruby-identifier">shellsplit</span>

  <span class="ruby-identifier">targets</span> = []
  <span class="ruby-identifier">macros</span> = {}

  <span class="ruby-identifier">args</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">arg</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">case</span> <span class="ruby-identifier">arg</span>
    <span class="ruby-keyword">when</span> <span class="ruby-regexp">/\A(\w+)=/</span>
      <span class="ruby-identifier">macros</span>[<span class="ruby-node">$1</span>] = <span class="ruby-node">$&#39;</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">targets</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">arg</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">targets</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&#39;&#39;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">targets</span>.<span class="ruby-identifier">empty?</span>

  {
    <span class="ruby-value">:command</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">command</span>,
    <span class="ruby-value">:targets</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">targets</span>,
    <span class="ruby-value">:macros</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">macros</span>,
  }
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- parse_make_command_line-source -->
            
          </div>

          

          
        </div><!-- parse_make_command_line-method -->
      
        <div id="process_based_port-method" class="method-detail ">
          <a name="method-i-process_based_port"></a>

          
          <div class="method-heading">
            <span class="method-name">process_based_port</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            <p>See <a href="TestCase.html#method-c-process_based_port"><code>::process_based_port</code></a></p>
            

            
            <div class="method-source-code" id="process_based_port-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rubygems/test_case.rb, line 1205</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">process_based_port</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">process_based_port</span>
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- process_based_port-source -->
            
          </div>

          

          
        </div><!-- process_based_port-method -->
      
        <div id="quick_gem-method" class="method-detail ">
          <a name="method-i-quick_gem"></a>

          
          <div class="method-heading">
            <span class="method-name">quick_gem</span><span
              class="method-args">(name, version='2')</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            <p>Creates a <a href="Specification.html"><code>Gem::Specification</code></a> with a minimum of extra work.  <code>name</code> and <code>version</code> are the gem&#39;s name and version,  platform, author, email, homepage, summary and description are defaulted.  The specification is yielded for customization.</p>

<p>The gem is added to the installed gems in +@gemhome+ and the runtime.</p>

<p>Use this with <a href="TestCase.html#method-i-write_file"><code>write_file</code></a> to build an installed gem.</p>
            

            
            <div class="method-source-code" id="quick_gem-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rubygems/test_case.rb, line 661</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">quick_gem</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">version</span>=<span class="ruby-string">&#39;2&#39;</span>)
  <span class="ruby-identifier">require</span> <span class="ruby-string">&#39;rubygems/specification&#39;</span>

  <span class="ruby-identifier">spec</span> = <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">Specification</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">s</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">s</span>.<span class="ruby-identifier">platform</span>    = <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">Platform</span><span class="ruby-operator">::</span><span class="ruby-constant">RUBY</span>
    <span class="ruby-identifier">s</span>.<span class="ruby-identifier">name</span>        = <span class="ruby-identifier">name</span>
    <span class="ruby-identifier">s</span>.<span class="ruby-identifier">version</span>     = <span class="ruby-identifier">version</span>
    <span class="ruby-identifier">s</span>.<span class="ruby-identifier">author</span>      = <span class="ruby-string">&#39;A User&#39;</span>
    <span class="ruby-identifier">s</span>.<span class="ruby-identifier">email</span>       = <span class="ruby-string">&#39;example@example.com&#39;</span>
    <span class="ruby-identifier">s</span>.<span class="ruby-identifier">homepage</span>    = <span class="ruby-string">&#39;http://example.com&#39;</span>
    <span class="ruby-identifier">s</span>.<span class="ruby-identifier">summary</span>     = <span class="ruby-string">&quot;this is a summary&quot;</span>
    <span class="ruby-identifier">s</span>.<span class="ruby-identifier">description</span> = <span class="ruby-string">&quot;This is a test description&quot;</span>

    <span class="ruby-keyword">yield</span>(<span class="ruby-identifier">s</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">block_given?</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">Specification</span>.<span class="ruby-identifier">map</span> <span class="ruby-comment"># HACK: force specs to (re-)load before we write</span>

  <span class="ruby-identifier">written_path</span> = <span class="ruby-identifier">write_file</span> <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">spec_file</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">io</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">io</span>.<span class="ruby-identifier">write</span> <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">to_ruby_for_cache</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">loaded_from</span> = <span class="ruby-identifier">written_path</span>

  <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">Specification</span>.<span class="ruby-identifier">reset</span>

  <span class="ruby-keyword">return</span> <span class="ruby-identifier">spec</span>
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- quick_gem-source -->
            
          </div>

          

          
        </div><!-- quick_gem-method -->
      
        <div id="read_binary-method" class="method-detail ">
          <a name="method-i-read_binary"></a>

          
          <div class="method-heading">
            <span class="method-name">read_binary</span><span
              class="method-args">(path)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            <p>Reads a binary file at <code>path</code></p>
            

            
            <div class="method-source-code" id="read_binary-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rubygems/test_case.rb, line 628</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">read_binary</span>(<span class="ruby-identifier">path</span>)
  <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">read_binary</span> <span class="ruby-identifier">path</span>
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- read_binary-source -->
            
          </div>

          

          
        </div><!-- read_binary-method -->
      
        <div id="read_cache-method" class="method-detail ">
          <a name="method-i-read_cache"></a>

          
          <div class="method-heading">
            <span class="method-name">read_cache</span><span
              class="method-args">(path)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            <p>Reads a Marshal file at <code>path</code></p>
            

            
            <div class="method-source-code" id="read_cache-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rubygems/test_case.rb, line 619</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">read_cache</span>(<span class="ruby-identifier">path</span>)
  <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span> <span class="ruby-identifier">path</span>.<span class="ruby-identifier">dup</span>.<span class="ruby-identifier">tap</span>(<span class="ruby-operator">&amp;</span><span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">UNTAINT</span>), <span class="ruby-string">&#39;rb&#39;</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">io</span><span class="ruby-operator">|</span>
    <span class="ruby-constant">Marshal</span>.<span class="ruby-identifier">load</span> <span class="ruby-identifier">io</span>.<span class="ruby-identifier">read</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- read_cache-source -->
            
          </div>

          

          
        </div><!-- read_cache-method -->
      
        <div id="refute_path_exists-method" class="method-detail ">
          <a name="method-i-refute_path_exists"></a>

          
          <div class="method-heading">
            <span class="method-name">refute_path_exists</span><span
              class="method-args">(path, msg = nil)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            <p>TODO: move to minitest</p>
            

            
            <div class="method-source-code" id="refute_path_exists-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rubygems/test_case.rb, line 218</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">refute_path_exists</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">msg</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">msg</span> = <span class="ruby-identifier">message</span>(<span class="ruby-identifier">msg</span>) { <span class="ruby-node">&quot;Expected path &#39;#{path}&#39; to not exist&quot;</span> }
  <span class="ruby-identifier">refute</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">path</span>), <span class="ruby-identifier">msg</span>
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- refute_path_exists-source -->
            
          </div>

          

          
        </div><!-- refute_path_exists-method -->
      
        <div id="save_loaded_features-method" class="method-detail ">
          <a name="method-i-save_loaded_features"></a>

          
          <div class="method-heading">
            <span class="method-name">save_loaded_features</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            
            

            
            <div class="method-source-code" id="save_loaded_features-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rubygems/test_case.rb, line 776</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">save_loaded_features</span>
  <span class="ruby-identifier">old_loaded_features</span> = <span class="ruby-identifier">$LOADED_FEATURES</span>.<span class="ruby-identifier">dup</span>
  <span class="ruby-keyword">yield</span>
<span class="ruby-keyword">ensure</span>
  <span class="ruby-identifier">prefix</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-keyword">__FILE__</span>) <span class="ruby-operator">+</span> <span class="ruby-string">&quot;/&quot;</span>
  <span class="ruby-identifier">new_features</span> = (<span class="ruby-identifier">$LOADED_FEATURES</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">old_loaded_features</span>)
  <span class="ruby-identifier">old_loaded_features</span>.<span class="ruby-identifier">concat</span>(<span class="ruby-identifier">new_features</span>.<span class="ruby-identifier">select</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">rindex</span>(<span class="ruby-identifier">prefix</span>, <span class="ruby-value">0</span>)})
  <span class="ruby-identifier">$LOADED_FEATURES</span>.<span class="ruby-identifier">replace</span> <span class="ruby-identifier">old_loaded_features</span>
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- save_loaded_features-source -->
            
          </div>

          

          
        </div><!-- save_loaded_features-method -->
      
        <div id="scan_make_command_lines-method" class="method-detail ">
          <a name="method-i-scan_make_command_lines"></a>

          
          <div class="method-heading">
            <span class="method-name">scan_make_command_lines</span><span
              class="method-args">(output)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            
            

            
            <div class="method-source-code" id="scan_make_command_lines-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rubygems/test_case.rb, line 223</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">scan_make_command_lines</span>(<span class="ruby-identifier">output</span>)
  <span class="ruby-identifier">output</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-regexp">/^#{Regexp.escape make_command}(?:[[:blank:]].*)?$/</span>)
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- scan_make_command_lines-source -->
            
          </div>

          

          
        </div><!-- scan_make_command_lines-method -->
      
        <div id="setup-method" class="method-detail ">
          <a name="method-i-setup"></a>

          
          <div class="method-heading">
            <span class="method-name">setup</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            <p><a href="TestCase.html#method-i-setup"><code>setup</code></a> prepares a sandboxed location to install gems.  All installs are directed to a temporary directory.  All install plugins are removed.</p>

<p>If the <code>RUBY</code> environment variable is set the given path is used for <a href="../Gem.html#method-c-ruby"><code>Gem::ruby</code></a>.  The local platform is set to <code>i386-mswin32</code> for Windows or <code>i686-darwin8.10.1</code> otherwise.</p>
            

            
            <div class="method-source-code" id="setup-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rubygems/test_case.rb, line 293</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">setup</span>
  <span class="ruby-keyword">super</span>

  <span class="ruby-ivar">@orig_env</span> = <span class="ruby-constant">ENV</span>.<span class="ruby-identifier">to_hash</span>

  <span class="ruby-constant">ENV</span>[<span class="ruby-string">&#39;GEM_VENDOR&#39;</span>] = <span class="ruby-keyword">nil</span>
  <span class="ruby-constant">ENV</span>[<span class="ruby-string">&#39;GEMRC&#39;</span>] = <span class="ruby-keyword">nil</span>
  <span class="ruby-constant">ENV</span>[<span class="ruby-string">&#39;SOURCE_DATE_EPOCH&#39;</span>] = <span class="ruby-keyword">nil</span>

  <span class="ruby-ivar">@current_dir</span> = <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">pwd</span>
  <span class="ruby-ivar">@fetcher</span>     = <span class="ruby-keyword">nil</span>

  <span class="ruby-ivar">@back_ui</span>                       = <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">DefaultUserInteraction</span>.<span class="ruby-identifier">ui</span>
  <span class="ruby-ivar">@ui</span>                            = <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">MockGemUi</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-comment"># This needs to be a new instance since we call use_ui(@ui) when we want to</span>
  <span class="ruby-comment"># capture output</span>
  <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">DefaultUserInteraction</span>.<span class="ruby-identifier">ui</span> = <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">MockGemUi</span>.<span class="ruby-identifier">new</span>

  <span class="ruby-identifier">tmpdir</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">realpath</span> <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">tmpdir</span>
  <span class="ruby-identifier">tmpdir</span>.<span class="ruby-identifier">tap</span>(<span class="ruby-operator">&amp;</span><span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">UNTAINT</span>)

  <span class="ruby-ivar">@tempdir</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">tmpdir</span>, <span class="ruby-node">&quot;test_rubygems_#{$$}&quot;</span>)
  <span class="ruby-ivar">@tempdir</span>.<span class="ruby-identifier">tap</span>(<span class="ruby-operator">&amp;</span><span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">UNTAINT</span>)

  <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">mkdir_p</span> <span class="ruby-ivar">@tempdir</span>

  <span class="ruby-comment"># This makes the tempdir consistent on Windows.</span>
  <span class="ruby-comment"># Dir.tmpdir may return short path name, but Dir[Dir.tmpdir] returns long</span>
  <span class="ruby-comment"># path name. https://bugs.ruby-lang.org/issues/10819</span>
  <span class="ruby-comment"># File.expand_path or File.realpath doesn&#39;t convert path name to long path</span>
  <span class="ruby-comment"># name. Only Dir[] (= Dir.glob) works.</span>
  <span class="ruby-comment"># Short and long path name is specific to Windows filesystem.</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">win_platform?</span>
    <span class="ruby-ivar">@tempdir</span> = <span class="ruby-constant">Dir</span>[<span class="ruby-ivar">@tempdir</span>][<span class="ruby-value">0</span>]
    <span class="ruby-ivar">@tempdir</span>.<span class="ruby-identifier">tap</span>(<span class="ruby-operator">&amp;</span><span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">UNTAINT</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-ivar">@gemhome</span>  = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span> <span class="ruby-ivar">@tempdir</span>, <span class="ruby-string">&#39;gemhome&#39;</span>
  <span class="ruby-ivar">@userhome</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span> <span class="ruby-ivar">@tempdir</span>, <span class="ruby-string">&#39;userhome&#39;</span>
  <span class="ruby-constant">ENV</span>[<span class="ruby-string">&quot;GEM_SPEC_CACHE&quot;</span>] = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span> <span class="ruby-ivar">@tempdir</span>, <span class="ruby-string">&#39;spec_cache&#39;</span>

  <span class="ruby-ivar">@orig_ruby</span> = <span class="ruby-keyword">if</span> <span class="ruby-constant">ENV</span>[<span class="ruby-string">&#39;RUBY&#39;</span>]
                 <span class="ruby-identifier">ruby</span> = <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">ruby</span>
                 <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">ruby</span> = <span class="ruby-constant">ENV</span>[<span class="ruby-string">&#39;RUBY&#39;</span>]
                 <span class="ruby-identifier">ruby</span>
               <span class="ruby-keyword">end</span>

  <span class="ruby-ivar">@git</span> = <span class="ruby-constant">ENV</span>[<span class="ruby-string">&#39;GIT&#39;</span>] <span class="ruby-operator">||</span> <span class="ruby-string">&#39;git&#39;</span>

  <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">ensure_gem_subdirectories</span> <span class="ruby-ivar">@gemhome</span>

  <span class="ruby-ivar">@orig_LOAD_PATH</span> = <span class="ruby-identifier">$LOAD_PATH</span>.<span class="ruby-identifier">dup</span>
  <span class="ruby-identifier">$LOAD_PATH</span>.<span class="ruby-identifier">map!</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">s</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">expand_path</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">realpath</span>(<span class="ruby-identifier">s</span>) <span class="ruby-keyword">rescue</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-identifier">s</span>)
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">expand_path</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">s</span>
      <span class="ruby-identifier">expand_path</span>.<span class="ruby-identifier">tap</span>(<span class="ruby-operator">&amp;</span><span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">UNTAINT</span>)
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">instance_variable_defined?</span>(<span class="ruby-value">:@gem_prelude_index</span>)
        <span class="ruby-identifier">expand_path</span>.<span class="ruby-identifier">instance_variable_set</span>(<span class="ruby-value">:@gem_prelude_index</span>, <span class="ruby-identifier">expand_path</span>)
      <span class="ruby-keyword">end</span>
      <span class="ruby-identifier">expand_path</span>.<span class="ruby-identifier">freeze</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">frozen?</span>
      <span class="ruby-identifier">s</span> = <span class="ruby-identifier">expand_path</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">s</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">chdir</span> <span class="ruby-ivar">@tempdir</span>

  <span class="ruby-constant">ENV</span>[<span class="ruby-string">&#39;HOME&#39;</span>] = <span class="ruby-ivar">@userhome</span>
  <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">instance_variable_set</span> <span class="ruby-value">:@user_home</span>, <span class="ruby-keyword">nil</span>
  <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">instance_variable_set</span> <span class="ruby-value">:@gemdeps</span>, <span class="ruby-keyword">nil</span>
  <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">instance_variable_set</span> <span class="ruby-value">:@env_requirements_by_name</span>, <span class="ruby-keyword">nil</span>
  <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">send</span> <span class="ruby-value">:remove_instance_variable</span>, <span class="ruby-value">:@ruby_version</span> <span class="ruby-keyword">if</span>
    <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">instance_variables</span>.<span class="ruby-identifier">include?</span> <span class="ruby-value">:@ruby_version</span>

  <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">mkdir_p</span> <span class="ruby-ivar">@gemhome</span>
  <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">mkdir_p</span> <span class="ruby-ivar">@userhome</span>

  <span class="ruby-constant">ENV</span>[<span class="ruby-string">&#39;GEM_PRIVATE_KEY_PASSPHRASE&#39;</span>] = <span class="ruby-constant">PRIVATE_KEY_PASSPHRASE</span>

  <span class="ruby-ivar">@default_dir</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span> <span class="ruby-ivar">@tempdir</span>, <span class="ruby-string">&#39;default&#39;</span>
  <span class="ruby-ivar">@default_spec_dir</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span> <span class="ruby-ivar">@default_dir</span>, <span class="ruby-string">&quot;specifications&quot;</span>, <span class="ruby-string">&quot;default&quot;</span>
  <span class="ruby-keyword">if</span> <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">java_platform?</span>
    <span class="ruby-ivar">@orig_default_gem_home</span> = <span class="ruby-constant">RbConfig</span><span class="ruby-operator">::</span><span class="ruby-constant">CONFIG</span>[<span class="ruby-string">&#39;default_gem_home&#39;</span>]
    <span class="ruby-constant">RbConfig</span><span class="ruby-operator">::</span><span class="ruby-constant">CONFIG</span>[<span class="ruby-string">&#39;default_gem_home&#39;</span>] = <span class="ruby-ivar">@default_dir</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">instance_variable_set</span>(<span class="ruby-value">:@default_dir</span>, <span class="ruby-ivar">@default_dir</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">mkdir_p</span> <span class="ruby-ivar">@default_spec_dir</span>

  <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">Specification</span>.<span class="ruby-identifier">unresolved_deps</span>.<span class="ruby-identifier">clear</span>
  <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">use_paths</span>(<span class="ruby-ivar">@gemhome</span>)

  <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">Security</span>.<span class="ruby-identifier">reset</span>

  <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">loaded_specs</span>.<span class="ruby-identifier">clear</span>
  <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">instance_variable_set</span>(<span class="ruby-value">:@activated_gem_paths</span>, <span class="ruby-value">0</span>)
  <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">clear_default_specs</span>
  <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">reset!</span>

  <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">configuration</span>.<span class="ruby-identifier">verbose</span> = <span class="ruby-keyword">true</span>
  <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">configuration</span>.<span class="ruby-identifier">update_sources</span> = <span class="ruby-keyword">true</span>

  <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">RemoteFetcher</span>.<span class="ruby-identifier">fetcher</span> = <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">FakeFetcher</span>.<span class="ruby-identifier">new</span>

  <span class="ruby-ivar">@gem_repo</span> = <span class="ruby-string">&quot;http://gems.example.com/&quot;</span>
  <span class="ruby-ivar">@uri</span> = <span class="ruby-constant">URI</span>.<span class="ruby-identifier">parse</span> <span class="ruby-ivar">@gem_repo</span>
  <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">sources</span>.<span class="ruby-identifier">replace</span> [<span class="ruby-ivar">@gem_repo</span>]

  <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">searcher</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">SpecFetcher</span>.<span class="ruby-identifier">fetcher</span> = <span class="ruby-keyword">nil</span>

  <span class="ruby-ivar">@orig_arch</span> = <span class="ruby-constant">RbConfig</span><span class="ruby-operator">::</span><span class="ruby-constant">CONFIG</span>[<span class="ruby-string">&#39;arch&#39;</span>]

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">win_platform?</span>
    <span class="ruby-identifier">util_set_arch</span> <span class="ruby-string">&#39;i386-mswin32&#39;</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">util_set_arch</span> <span class="ruby-string">&#39;i686-darwin8.10.1&#39;</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-ivar">@orig_hooks</span> = {}
  <span class="ruby-node">%w[post_install_hooks done_installing_hooks post_uninstall_hooks pre_uninstall_hooks pre_install_hooks pre_reset_hooks post_reset_hooks post_build_hooks]</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">name</span><span class="ruby-operator">|</span>
    <span class="ruby-ivar">@orig_hooks</span>[<span class="ruby-identifier">name</span>] = <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">name</span>).<span class="ruby-identifier">dup</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-ivar">@marshal_version</span> = <span class="ruby-node">&quot;#{Marshal::MAJOR_VERSION}.#{Marshal::MINOR_VERSION}&quot;</span>
  <span class="ruby-ivar">@orig_LOADED_FEATURES</span> = <span class="ruby-identifier">$LOADED_FEATURES</span>.<span class="ruby-identifier">dup</span>
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- setup-source -->
            
          </div>

          

          
        </div><!-- setup-method -->
      
        <div id="teardown-method" class="method-detail ">
          <a name="method-i-teardown"></a>

          
          <div class="method-heading">
            <span class="method-name">teardown</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            <p><a href="TestCase.html#method-i-teardown"><code>teardown</code></a> restores the process to its original state and removes the tempdir</p>
            

            
            <div class="method-source-code" id="teardown-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rubygems/test_case.rb, line 425</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">teardown</span>
  <span class="ruby-identifier">$LOAD_PATH</span>.<span class="ruby-identifier">replace</span> <span class="ruby-ivar">@orig_LOAD_PATH</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@orig_LOAD_PATH</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@orig_LOADED_FEATURES</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@orig_LOAD_PATH</span>
      <span class="ruby-identifier">paths</span> = <span class="ruby-ivar">@orig_LOAD_PATH</span>.<span class="ruby-identifier">map</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">path</span><span class="ruby-operator">|</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-identifier">path</span>), <span class="ruby-string">&quot;/&quot;</span>)}
      (<span class="ruby-identifier">$LOADED_FEATURES</span> <span class="ruby-operator">-</span> <span class="ruby-ivar">@orig_LOADED_FEATURES</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">feat</span><span class="ruby-operator">|</span>
        <span class="ruby-keyword">unless</span> <span class="ruby-identifier">paths</span>.<span class="ruby-identifier">any?</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">path</span><span class="ruby-operator">|</span> <span class="ruby-identifier">feat</span>.<span class="ruby-identifier">start_with?</span>(<span class="ruby-identifier">path</span>)}
          <span class="ruby-identifier">$LOADED_FEATURES</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">feat</span>)
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">$LOADED_FEATURES</span>.<span class="ruby-identifier">replace</span> <span class="ruby-ivar">@orig_LOADED_FEATURES</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-constant">RbConfig</span><span class="ruby-operator">::</span><span class="ruby-constant">CONFIG</span>[<span class="ruby-string">&#39;arch&#39;</span>] = <span class="ruby-ivar">@orig_arch</span>

  <span class="ruby-keyword">if</span> <span class="ruby-keyword">defined?</span> <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">RemoteFetcher</span>
    <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">RemoteFetcher</span>.<span class="ruby-identifier">fetcher</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">chdir</span> <span class="ruby-ivar">@current_dir</span>

  <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">rm_rf</span> <span class="ruby-ivar">@tempdir</span>

  <span class="ruby-constant">ENV</span>.<span class="ruby-identifier">replace</span>(<span class="ruby-ivar">@orig_env</span>)

  <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">ruby</span> = <span class="ruby-ivar">@orig_ruby</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@orig_ruby</span>

  <span class="ruby-keyword">if</span> <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">java_platform?</span>
    <span class="ruby-constant">RbConfig</span><span class="ruby-operator">::</span><span class="ruby-constant">CONFIG</span>[<span class="ruby-string">&#39;default_gem_home&#39;</span>] = <span class="ruby-ivar">@orig_default_gem_home</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">instance_variable_set</span> <span class="ruby-value">:@default_dir</span>, <span class="ruby-keyword">nil</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">Specification</span>.<span class="ruby-identifier">_clear_load_cache</span>
  <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">Specification</span>.<span class="ruby-identifier">unresolved_deps</span>.<span class="ruby-identifier">clear</span>
  <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-identifier">refresh</span>

  <span class="ruby-ivar">@orig_hooks</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">name</span>, <span class="ruby-identifier">hooks</span><span class="ruby-operator">|</span>
    <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">name</span>).<span class="ruby-identifier">replace</span> <span class="ruby-identifier">hooks</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-ivar">@back_ui</span>.<span class="ruby-identifier">close</span>
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- teardown-source -->
            
          </div>

          

          
        </div><!-- teardown-method -->
      
        <div id="uninstall_gem-method" class="method-detail ">
          <a name="method-i-uninstall_gem"></a>

          
          <div class="method-heading">
            <span class="method-name">uninstall_gem</span><span
              class="method-args">(spec)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            <p>Uninstalls the <a href="Specification.html"><code>Gem::Specification</code></a> <code>spec</code></p>
            

            
            <div class="method-source-code" id="uninstall_gem-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rubygems/test_case.rb, line 596</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">uninstall_gem</span>(<span class="ruby-identifier">spec</span>)
  <span class="ruby-identifier">require</span> <span class="ruby-string">&#39;rubygems/uninstaller&#39;</span>

  <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">Uninstaller</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">ask_if_ok</span>(<span class="ruby-identifier">spec</span>)
      <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">spec</span>.<span class="ruby-identifier">name</span>, <span class="ruby-value">:executables</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">:user_install</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-keyword">true</span>).<span class="ruby-identifier">uninstall</span>
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- uninstall_gem-source -->
            
          </div>

          

          
        </div><!-- uninstall_gem-method -->
      
        <div id="unresolved_names-method" class="method-detail ">
          <a name="method-i-unresolved_names"></a>

          
          <div class="method-heading">
            <span class="method-name">unresolved_names</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            
            

            
            <div class="method-source-code" id="unresolved_names-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rubygems/test_case.rb, line 772</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">unresolved_names</span>
  <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">Specification</span>.<span class="ruby-identifier">unresolved_deps</span>.<span class="ruby-identifier">values</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:to_s</span>).<span class="ruby-identifier">sort</span>
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- unresolved_names-source -->
            
          </div>

          

          
        </div><!-- unresolved_names-method -->
      
        <div id="util_build_gem-method" class="method-detail ">
          <a name="method-i-util_build_gem"></a>

          
          <div class="method-heading">
            <span class="method-name">util_build_gem</span><span
              class="method-args">(spec)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            <p>Builds a gem from <code>spec</code> and places it in <code>File.join @gemhome, &#39;cache&#39;</code>.  Automatically creates files based on <code>spec.files</code></p>
            

            
            <div class="method-source-code" id="util_build_gem-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rubygems/test_case.rb, line 694</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">util_build_gem</span>(<span class="ruby-identifier">spec</span>)
  <span class="ruby-identifier">dir</span> = <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">gem_dir</span>
  <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">mkdir_p</span> <span class="ruby-identifier">dir</span>

  <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">chdir</span> <span class="ruby-identifier">dir</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">files</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">file</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">next</span> <span class="ruby-keyword">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span> <span class="ruby-identifier">file</span>
      <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">mkdir_p</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-identifier">file</span>)

      <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span> <span class="ruby-identifier">file</span>, <span class="ruby-string">&#39;w&#39;</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">fp</span><span class="ruby-operator">|</span>
        <span class="ruby-identifier">fp</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;# #{file}&quot;</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">use_ui</span> <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">MockGemUi</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword">do</span>
      <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">Package</span>.<span class="ruby-identifier">build</span> <span class="ruby-identifier">spec</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">cache</span> = <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">cache_file</span>
    <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">mv</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">basename</span>(<span class="ruby-identifier">cache</span>), <span class="ruby-identifier">cache</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- util_build_gem-source -->
            
          </div>

          

          
        </div><!-- util_build_gem-method -->
      
        <div id="util_clear_RUBY_VERSION-method" class="method-detail ">
          <a name="method-i-util_clear_RUBY_VERSION"></a>

          
          <div class="method-heading">
            <span class="method-name">util_clear_RUBY_VERSION</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            
            

            
            <div class="method-source-code" id="util_clear_RUBY_VERSION-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rubygems/test_case.rb, line 1107</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">util_clear_RUBY_VERSION</span>
  <span class="ruby-constant">Object</span>.<span class="ruby-identifier">send</span> <span class="ruby-value">:remove_const</span>, <span class="ruby-value">:RUBY_VERSION</span>
  <span class="ruby-constant">Object</span>.<span class="ruby-identifier">send</span> <span class="ruby-value">:remove_const</span>, <span class="ruby-value">:RUBY_PATCHLEVEL</span>     <span class="ruby-keyword">if</span> <span class="ruby-keyword">defined?</span>(<span class="ruby-constant">RUBY_PATCHLEVEL</span>)
  <span class="ruby-constant">Object</span>.<span class="ruby-identifier">send</span> <span class="ruby-value">:remove_const</span>, <span class="ruby-value">:RUBY_REVISION</span>       <span class="ruby-keyword">if</span> <span class="ruby-keyword">defined?</span>(<span class="ruby-constant">RUBY_REVISION</span>)
  <span class="ruby-constant">Object</span>.<span class="ruby-identifier">send</span> <span class="ruby-value">:remove_const</span>, <span class="ruby-value">:RUBY_DESCRIPTION</span>    <span class="ruby-keyword">if</span> <span class="ruby-keyword">defined?</span>(<span class="ruby-constant">RUBY_DESCRIPTION</span>)
  <span class="ruby-constant">Object</span>.<span class="ruby-identifier">send</span> <span class="ruby-value">:remove_const</span>, <span class="ruby-value">:RUBY_ENGINE</span>
  <span class="ruby-constant">Object</span>.<span class="ruby-identifier">send</span> <span class="ruby-value">:remove_const</span>, <span class="ruby-value">:RUBY_ENGINE_VERSION</span> <span class="ruby-keyword">if</span> <span class="ruby-keyword">defined?</span>(<span class="ruby-constant">RUBY_ENGINE_VERSION</span>)
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- util_clear_RUBY_VERSION-source -->
            
          </div>

          

          
        </div><!-- util_clear_RUBY_VERSION-method -->
      
        <div id="util_clear_gems-method" class="method-detail ">
          <a name="method-i-util_clear_gems"></a>

          
          <div class="method-heading">
            <span class="method-name">util_clear_gems</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            <p>Removes all installed gems from +@gemhome+.</p>
            

            
            <div class="method-source-code" id="util_clear_gems-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rubygems/test_case.rb, line 725</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">util_clear_gems</span>
  <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">rm_rf</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-ivar">@gemhome</span>, <span class="ruby-string">&quot;gems&quot;</span>)
  <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">mkdir</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-ivar">@gemhome</span>, <span class="ruby-string">&quot;gems&quot;</span>)
  <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">rm_rf</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-ivar">@gemhome</span>, <span class="ruby-string">&quot;specifications&quot;</span>)
  <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">mkdir</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-ivar">@gemhome</span>, <span class="ruby-string">&quot;specifications&quot;</span>)
  <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">Specification</span>.<span class="ruby-identifier">reset</span>
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- util_clear_gems-source -->
            
          </div>

          

          
        </div><!-- util_clear_gems-method -->
      
        <div id="util_gem-method" class="method-detail ">
          <a name="method-i-util_gem"></a>

          
          <div class="method-heading">
            <span class="method-name">util_gem</span><span
              class="method-args">(name, version, deps = nil, &block)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            <p>Creates a gem with <code>name</code>, <code>version</code> and <code>deps</code>.  The specification will be yielded before gem creation for customization.  The gem will be placed in <code>File.join @tempdir, &#39;gems&#39;</code>.  The specification and .gem file location are returned.</p>
            

            
            <div class="method-source-code" id="util_gem-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rubygems/test_case.rb, line 858</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">util_gem</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">version</span>, <span class="ruby-identifier">deps</span> = <span class="ruby-keyword">nil</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">deps</span>
    <span class="ruby-identifier">block</span> = <span class="ruby-identifier">proc</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">s</span><span class="ruby-operator">|</span>
      <span class="ruby-comment"># Since Hash#each is unordered in 1.8, sort</span>
      <span class="ruby-comment"># the keys and iterate that way so the tests are</span>
      <span class="ruby-comment"># deterministic on all implementations.</span>
      <span class="ruby-identifier">deps</span>.<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">sort</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">n</span><span class="ruby-operator">|</span>
        <span class="ruby-identifier">s</span>.<span class="ruby-identifier">add_dependency</span> <span class="ruby-identifier">n</span>, (<span class="ruby-identifier">deps</span>[<span class="ruby-identifier">n</span>] <span class="ruby-operator">||</span> <span class="ruby-string">&#39;&gt;= 0&#39;</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">spec</span> = <span class="ruby-identifier">quick_gem</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">version</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)

  <span class="ruby-identifier">util_build_gem</span> <span class="ruby-identifier">spec</span>

  <span class="ruby-identifier">cache_file</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span> <span class="ruby-ivar">@tempdir</span>, <span class="ruby-string">&#39;gems&#39;</span>, <span class="ruby-node">&quot;#{spec.original_name}.gem&quot;</span>
  <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">mkdir_p</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span> <span class="ruby-identifier">cache_file</span>
  <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">mv</span> <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">cache_file</span>, <span class="ruby-identifier">cache_file</span>
  <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">rm</span> <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">spec_file</span>

  <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">loaded_from</span> = <span class="ruby-keyword">nil</span>

  [<span class="ruby-identifier">spec</span>, <span class="ruby-identifier">cache_file</span>]
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- util_gem-source -->
            
          </div>

          

          
        </div><!-- util_gem-method -->
      
        <div id="util_gzip-method" class="method-detail ">
          <a name="method-i-util_gzip"></a>

          
          <div class="method-heading">
            <span class="method-name">util_gzip</span><span
              class="method-args">(data)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            <p>Gzips <code>data</code>.</p>
            

            
            <div class="method-source-code" id="util_gzip-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rubygems/test_case.rb, line 887</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">util_gzip</span>(<span class="ruby-identifier">data</span>)
  <span class="ruby-identifier">out</span> = <span class="ruby-constant">StringIO</span>.<span class="ruby-identifier">new</span>

  <span class="ruby-constant">Zlib</span><span class="ruby-operator">::</span><span class="ruby-constant">GzipWriter</span>.<span class="ruby-identifier">wrap</span> <span class="ruby-identifier">out</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">io</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">io</span>.<span class="ruby-identifier">write</span> <span class="ruby-identifier">data</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">out</span>.<span class="ruby-identifier">string</span>
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- util_gzip-source -->
            
          </div>

          

          
        </div><!-- util_gzip-method -->
      
        <div id="util_make_gems-method" class="method-detail ">
          <a name="method-i-util_make_gems"></a>

          
          <div class="method-heading">
            <span class="method-name">util_make_gems</span><span
              class="method-args">(prerelease = false)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            <p>Creates several default gems which all have a lib/code.rb file.  The gems are not installed but are available in the cache dir.</p>
<dl class="rdoc-list note-list"><dt>+@a1+
<dd>
<p>gem a version 1, this is the best-described gem.</p>
</dd><dt>+@a2+
<dd>
<p>gem a version 2</p>
</dd><dt>+@a3a
<dd>
<p>gem a version 3.a</p>
</dd><dt>+@a_evil9+
<dd>
<p>gem a_evil version 9, use this to ensure similarly-named gems don&#39;t collide with a.</p>
</dd><dt>+@b2+
<dd>
<p>gem b version 2</p>
</dd><dt>+@c1_2+
<dd>
<p>gem c version 1.2</p>
</dd><dt>+@pl1+
<dd>
<p>gem pl version 1, this gem has a legacy platform of i386-linux.</p>
</dd></dl>

<p>Additional <code>prerelease</code> gems may also be created:</p>
<dl class="rdoc-list note-list"><dt>+@a2_pre+
<dd>
<p>gem a version 2.a</p>
</dd></dl>

<p>TODO: nuke this and fix tests. this should speed up a lot</p>
            

            
            <div class="method-source-code" id="util_make_gems-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rubygems/test_case.rb, line 915</span>
  <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">util_make_gems</span>(<span class="ruby-identifier">prerelease</span> = <span class="ruby-keyword">false</span>)
    <span class="ruby-ivar">@a1</span> = <span class="ruby-identifier">quick_gem</span> <span class="ruby-string">&#39;a&#39;</span>, <span class="ruby-string">&#39;1&#39;</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">s</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">s</span>.<span class="ruby-identifier">files</span> = <span class="ruby-node">%w[lib/code.rb]</span>
      <span class="ruby-identifier">s</span>.<span class="ruby-identifier">require_paths</span> = <span class="ruby-node">%w[lib]</span>
      <span class="ruby-identifier">s</span>.<span class="ruby-identifier">date</span> = <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">Specification</span><span class="ruby-operator">::</span><span class="ruby-constant">TODAY</span> <span class="ruby-operator">-</span> <span class="ruby-value">86400</span>
      <span class="ruby-identifier">s</span>.<span class="ruby-identifier">homepage</span> = <span class="ruby-string">&#39;http://a.example.com&#39;</span>
      <span class="ruby-identifier">s</span>.<span class="ruby-identifier">email</span> = <span class="ruby-node">%w[example@example.com example2@example.com]</span>
      <span class="ruby-identifier">s</span>.<span class="ruby-identifier">authors</span> = <span class="ruby-node">%w[Example Example2]</span>
      <span class="ruby-identifier">s</span>.<span class="ruby-identifier">description</span> = <span class="ruby-identifier">&lt;&lt;-DESC</span>
<span class="ruby-value">This line is really, really long.  So long, in fact, that it is more than eighty characters long!  The purpose of this line is for testing wrapping behavior because sometimes people don&#39;t wrap their text to eighty characters.  Without the wrapping, the text might not look good in the RSS feed.

Also, a list:
  * An entry that\&#39;s actually kind of sort
  * an entry that\&#39;s really long, which will probably get wrapped funny.  That&#39;s ok, somebody wasn&#39;t thinking straight when they made it more than eighty characters.
</span><span class="ruby-identifier">      DESC</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">init</span> = <span class="ruby-identifier">proc</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">s</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">s</span>.<span class="ruby-identifier">files</span> = <span class="ruby-node">%w[lib/code.rb]</span>
      <span class="ruby-identifier">s</span>.<span class="ruby-identifier">require_paths</span> = <span class="ruby-node">%w[lib]</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-ivar">@a2</span>      = <span class="ruby-identifier">quick_gem</span>(<span class="ruby-string">&#39;a&#39;</span>, <span class="ruby-string">&#39;2&#39;</span>,      <span class="ruby-operator">&amp;</span><span class="ruby-identifier">init</span>)
    <span class="ruby-ivar">@a3a</span>     = <span class="ruby-identifier">quick_gem</span>(<span class="ruby-string">&#39;a&#39;</span>, <span class="ruby-string">&#39;3.a&#39;</span>,    <span class="ruby-operator">&amp;</span><span class="ruby-identifier">init</span>)
    <span class="ruby-ivar">@a_evil9</span> = <span class="ruby-identifier">quick_gem</span>(<span class="ruby-string">&#39;a_evil&#39;</span>, <span class="ruby-string">&#39;9&#39;</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">init</span>)
    <span class="ruby-ivar">@b2</span>      = <span class="ruby-identifier">quick_gem</span>(<span class="ruby-string">&#39;b&#39;</span>, <span class="ruby-string">&#39;2&#39;</span>,      <span class="ruby-operator">&amp;</span><span class="ruby-identifier">init</span>)
    <span class="ruby-ivar">@c1_2</span>    = <span class="ruby-identifier">quick_gem</span>(<span class="ruby-string">&#39;c&#39;</span>, <span class="ruby-string">&#39;1.2&#39;</span>,    <span class="ruby-operator">&amp;</span><span class="ruby-identifier">init</span>)
    <span class="ruby-ivar">@x</span>       = <span class="ruby-identifier">quick_gem</span>(<span class="ruby-string">&#39;x&#39;</span>, <span class="ruby-string">&#39;1&#39;</span>,      <span class="ruby-operator">&amp;</span><span class="ruby-identifier">init</span>)
    <span class="ruby-ivar">@dep_x</span>   = <span class="ruby-identifier">quick_gem</span>(<span class="ruby-string">&#39;dep_x&#39;</span>, <span class="ruby-string">&#39;1&#39;</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">s</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">s</span>.<span class="ruby-identifier">files</span> = <span class="ruby-node">%w[lib/code.rb]</span>
      <span class="ruby-identifier">s</span>.<span class="ruby-identifier">require_paths</span> = <span class="ruby-node">%w[lib]</span>
      <span class="ruby-identifier">s</span>.<span class="ruby-identifier">add_dependency</span> <span class="ruby-string">&#39;x&#39;</span>, <span class="ruby-string">&#39;&gt;= 1&#39;</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-ivar">@pl1</span> = <span class="ruby-identifier">quick_gem</span> <span class="ruby-string">&#39;pl&#39;</span>, <span class="ruby-string">&#39;1&#39;</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">s</span><span class="ruby-operator">|</span> <span class="ruby-comment"># l for legacy</span>
      <span class="ruby-identifier">s</span>.<span class="ruby-identifier">files</span> = <span class="ruby-node">%w[lib/code.rb]</span>
      <span class="ruby-identifier">s</span>.<span class="ruby-identifier">require_paths</span> = <span class="ruby-node">%w[lib]</span>
      <span class="ruby-identifier">s</span>.<span class="ruby-identifier">platform</span> = <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">Platform</span>.<span class="ruby-identifier">new</span> <span class="ruby-string">&#39;i386-linux&#39;</span>
      <span class="ruby-identifier">s</span>.<span class="ruby-identifier">instance_variable_set</span> <span class="ruby-value">:@original_platform</span>, <span class="ruby-string">&#39;i386-linux&#39;</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">prerelease</span>
      <span class="ruby-ivar">@a2_pre</span> = <span class="ruby-identifier">quick_gem</span>(<span class="ruby-string">&#39;a&#39;</span>, <span class="ruby-string">&#39;2.a&#39;</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">init</span>)
      <span class="ruby-identifier">write_file</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-operator">*</span><span class="ruby-node">%W[gems #{@a2_pre.original_name} lib code.rb]</span>)
      <span class="ruby-identifier">util_build_gem</span> <span class="ruby-ivar">@a2_pre</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">write_file</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-operator">*</span><span class="ruby-node">%W[gems #{@a1.original_name}      lib code.rb]</span>)
    <span class="ruby-identifier">write_file</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-operator">*</span><span class="ruby-node">%W[gems #{@a2.original_name}      lib code.rb]</span>)
    <span class="ruby-identifier">write_file</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-operator">*</span><span class="ruby-node">%W[gems #{@a3a.original_name}     lib code.rb]</span>)
    <span class="ruby-identifier">write_file</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-operator">*</span><span class="ruby-node">%W[gems #{@a_evil9.original_name} lib code.rb]</span>)
    <span class="ruby-identifier">write_file</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-operator">*</span><span class="ruby-node">%W[gems #{@b2.original_name}      lib code.rb]</span>)
    <span class="ruby-identifier">write_file</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-operator">*</span><span class="ruby-node">%W[gems #{@c1_2.original_name}    lib code.rb]</span>)
    <span class="ruby-identifier">write_file</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-operator">*</span><span class="ruby-node">%W[gems #{@pl1.original_name}     lib code.rb]</span>)
    <span class="ruby-identifier">write_file</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-operator">*</span><span class="ruby-node">%W[gems #{@x.original_name}       lib code.rb]</span>)
    <span class="ruby-identifier">write_file</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-operator">*</span><span class="ruby-node">%W[gems #{@dep_x.original_name}   lib code.rb]</span>)

    [<span class="ruby-ivar">@a1</span>, <span class="ruby-ivar">@a2</span>, <span class="ruby-ivar">@a3a</span>, <span class="ruby-ivar">@a_evil9</span>, <span class="ruby-ivar">@b2</span>, <span class="ruby-ivar">@c1_2</span>, <span class="ruby-ivar">@pl1</span>, <span class="ruby-ivar">@x</span>, <span class="ruby-ivar">@dep_x</span>].<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">spec</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">util_build_gem</span> <span class="ruby-identifier">spec</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">rm_r</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-ivar">@gemhome</span>, <span class="ruby-string">&quot;gems&quot;</span>, <span class="ruby-ivar">@pl1</span>.<span class="ruby-identifier">original_name</span>)
  <span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- util_make_gems-source -->
            
          </div>

          

          
        </div><!-- util_make_gems-method -->
      
        <div id="util_remove_gem-method" class="method-detail ">
          <a name="method-i-util_remove_gem"></a>

          
          <div class="method-heading">
            <span class="method-name">util_remove_gem</span><span
              class="method-args">(spec)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            
            

            
            <div class="method-source-code" id="util_remove_gem-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rubygems/test_case.rb, line 717</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">util_remove_gem</span>(<span class="ruby-identifier">spec</span>)
  <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">rm_rf</span> <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">cache_file</span>
  <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">rm_rf</span> <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">spec_file</span>
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- util_remove_gem-source -->
            
          </div>

          

          
        </div><!-- util_remove_gem-method -->
      
        <div id="util_restore_RUBY_VERSION-method" class="method-detail ">
          <a name="method-i-util_restore_RUBY_VERSION"></a>

          
          <div class="method-heading">
            <span class="method-name">util_restore_RUBY_VERSION</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            
            

            
            <div class="method-source-code" id="util_restore_RUBY_VERSION-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rubygems/test_case.rb, line 1092</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">util_restore_RUBY_VERSION</span>
  <span class="ruby-identifier">util_clear_RUBY_VERSION</span>

  <span class="ruby-constant">Object</span>.<span class="ruby-identifier">const_set</span> <span class="ruby-value">:RUBY_VERSION</span>,        <span class="ruby-ivar">@RUBY_VERSION</span>
  <span class="ruby-constant">Object</span>.<span class="ruby-identifier">const_set</span> <span class="ruby-value">:RUBY_PATCHLEVEL</span>,     <span class="ruby-ivar">@RUBY_PATCHLEVEL</span>  <span class="ruby-keyword">if</span>
    <span class="ruby-keyword">defined?</span>(<span class="ruby-ivar">@RUBY_PATCHLEVEL</span>)
  <span class="ruby-constant">Object</span>.<span class="ruby-identifier">const_set</span> <span class="ruby-value">:RUBY_REVISION</span>,       <span class="ruby-ivar">@RUBY_REVISION</span>    <span class="ruby-keyword">if</span>
    <span class="ruby-keyword">defined?</span>(<span class="ruby-ivar">@RUBY_REVISION</span>)
  <span class="ruby-constant">Object</span>.<span class="ruby-identifier">const_set</span> <span class="ruby-value">:RUBY_DESCRIPTION</span>,    <span class="ruby-ivar">@RUBY_DESCRIPTION</span> <span class="ruby-keyword">if</span>
    <span class="ruby-keyword">defined?</span>(<span class="ruby-ivar">@RUBY_DESCRIPTION</span>)
  <span class="ruby-constant">Object</span>.<span class="ruby-identifier">const_set</span> <span class="ruby-value">:RUBY_ENGINE</span>,         <span class="ruby-ivar">@RUBY_ENGINE</span>
  <span class="ruby-constant">Object</span>.<span class="ruby-identifier">const_set</span> <span class="ruby-value">:RUBY_ENGINE_VERSION</span>, <span class="ruby-ivar">@RUBY_ENGINE_VERSION</span> <span class="ruby-keyword">if</span>
    <span class="ruby-keyword">defined?</span>(<span class="ruby-ivar">@RUBY_ENGINE_VERSION</span>)
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- util_restore_RUBY_VERSION-source -->
            
          </div>

          

          
        </div><!-- util_restore_RUBY_VERSION-method -->
      
        <div id="util_set_RUBY_VERSION-method" class="method-detail ">
          <a name="method-i-util_set_RUBY_VERSION"></a>

          
          <div class="method-heading">
            <span class="method-name">util_set_RUBY_VERSION</span><span
              class="method-args">(version, patchlevel = nil, revision = nil, description = nil, engine = "ruby", engine_version = nil)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            
            

            
            <div class="method-source-code" id="util_set_RUBY_VERSION-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rubygems/test_case.rb, line 1070</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">util_set_RUBY_VERSION</span>(<span class="ruby-identifier">version</span>, <span class="ruby-identifier">patchlevel</span> = <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">revision</span> = <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">description</span> = <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">engine</span> = <span class="ruby-string">&quot;ruby&quot;</span>, <span class="ruby-identifier">engine_version</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">instance_variables</span>.<span class="ruby-identifier">include?</span> <span class="ruby-value">:@ruby_version</span>
    <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">send</span> <span class="ruby-value">:remove_instance_variable</span>, <span class="ruby-value">:@ruby_version</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-ivar">@RUBY_VERSION</span>        = <span class="ruby-constant">RUBY_VERSION</span>
  <span class="ruby-ivar">@RUBY_PATCHLEVEL</span>     = <span class="ruby-constant">RUBY_PATCHLEVEL</span>     <span class="ruby-keyword">if</span> <span class="ruby-keyword">defined?</span>(<span class="ruby-constant">RUBY_PATCHLEVEL</span>)
  <span class="ruby-ivar">@RUBY_REVISION</span>       = <span class="ruby-constant">RUBY_REVISION</span>       <span class="ruby-keyword">if</span> <span class="ruby-keyword">defined?</span>(<span class="ruby-constant">RUBY_REVISION</span>)
  <span class="ruby-ivar">@RUBY_DESCRIPTION</span>    = <span class="ruby-constant">RUBY_DESCRIPTION</span>    <span class="ruby-keyword">if</span> <span class="ruby-keyword">defined?</span>(<span class="ruby-constant">RUBY_DESCRIPTION</span>)
  <span class="ruby-ivar">@RUBY_ENGINE</span>         = <span class="ruby-constant">RUBY_ENGINE</span>
  <span class="ruby-ivar">@RUBY_ENGINE_VERSION</span> = <span class="ruby-constant">RUBY_ENGINE_VERSION</span> <span class="ruby-keyword">if</span> <span class="ruby-keyword">defined?</span>(<span class="ruby-constant">RUBY_ENGINE_VERSION</span>)

  <span class="ruby-identifier">util_clear_RUBY_VERSION</span>

  <span class="ruby-constant">Object</span>.<span class="ruby-identifier">const_set</span> <span class="ruby-value">:RUBY_VERSION</span>,        <span class="ruby-identifier">version</span>
  <span class="ruby-constant">Object</span>.<span class="ruby-identifier">const_set</span> <span class="ruby-value">:RUBY_PATCHLEVEL</span>,     <span class="ruby-identifier">patchlevel</span>     <span class="ruby-keyword">if</span> <span class="ruby-identifier">patchlevel</span>
  <span class="ruby-constant">Object</span>.<span class="ruby-identifier">const_set</span> <span class="ruby-value">:RUBY_REVISION</span>,       <span class="ruby-identifier">revision</span>       <span class="ruby-keyword">if</span> <span class="ruby-identifier">revision</span>
  <span class="ruby-constant">Object</span>.<span class="ruby-identifier">const_set</span> <span class="ruby-value">:RUBY_DESCRIPTION</span>,    <span class="ruby-identifier">description</span>    <span class="ruby-keyword">if</span> <span class="ruby-identifier">description</span>
  <span class="ruby-constant">Object</span>.<span class="ruby-identifier">const_set</span> <span class="ruby-value">:RUBY_ENGINE</span>,         <span class="ruby-identifier">engine</span>
  <span class="ruby-constant">Object</span>.<span class="ruby-identifier">const_set</span> <span class="ruby-value">:RUBY_ENGINE_VERSION</span>, <span class="ruby-identifier">engine_version</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">engine_version</span>
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- util_set_RUBY_VERSION-source -->
            
          </div>

          

          
        </div><!-- util_set_RUBY_VERSION-method -->
      
        <div id="util_set_arch-method" class="method-detail ">
          <a name="method-i-util_set_arch"></a>

          
          <div class="method-heading">
            <span class="method-name">util_set_arch</span><span
              class="method-args">(arch)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            <p>Set the platform to <code>arch</code></p>
            

            
            <div class="method-source-code" id="util_set_arch-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rubygems/test_case.rb, line 982</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">util_set_arch</span>(<span class="ruby-identifier">arch</span>)
  <span class="ruby-constant">RbConfig</span><span class="ruby-operator">::</span><span class="ruby-constant">CONFIG</span>[<span class="ruby-string">&#39;arch&#39;</span>] = <span class="ruby-identifier">arch</span>
  <span class="ruby-identifier">platform</span> = <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">Platform</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">arch</span>

  <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">instance_variable_set</span> <span class="ruby-value">:@platforms</span>, <span class="ruby-keyword">nil</span>
  <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">Platform</span>.<span class="ruby-identifier">instance_variable_set</span> <span class="ruby-value">:@local</span>, <span class="ruby-keyword">nil</span>

  <span class="ruby-keyword">yield</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">block_given?</span>

  <span class="ruby-identifier">platform</span>
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- util_set_arch-source -->
            
          </div>

          

          
        </div><!-- util_set_arch-method -->
      
        <div id="util_setup_spec_fetcher-method" class="method-detail ">
          <a name="method-i-util_setup_spec_fetcher"></a>

          
          <div class="method-heading">
            <span class="method-name">util_setup_spec_fetcher</span><span
              class="method-args">(*specs)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            <p>Sets up <a href="SpecFetcher.html"><code>Gem::SpecFetcher</code></a> to return information from the gems in <code>specs</code>.</p>
            

            
            <div class="method-source-code" id="util_setup_spec_fetcher-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rubygems/test_case.rb, line 1006</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">util_setup_spec_fetcher</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">specs</span>)
  <span class="ruby-identifier">all_specs</span> = <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">Specification</span>.<span class="ruby-identifier">to_a</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">specs</span>
  <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">Specification</span>.<span class="ruby-identifier">_resort!</span> <span class="ruby-identifier">all_specs</span>

  <span class="ruby-identifier">spec_fetcher</span> = <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">SpecFetcher</span>.<span class="ruby-identifier">fetcher</span>

  <span class="ruby-identifier">prerelease</span>, <span class="ruby-identifier">all</span> = <span class="ruby-identifier">all_specs</span>.<span class="ruby-identifier">partition</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">spec</span><span class="ruby-operator">|</span> <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">version</span>.<span class="ruby-identifier">prerelease?</span>  }
  <span class="ruby-identifier">latest</span> = <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">Specification</span>.<span class="ruby-identifier">_latest_specs</span> <span class="ruby-identifier">all_specs</span>

  <span class="ruby-identifier">spec_fetcher</span>.<span class="ruby-identifier">specs</span>[<span class="ruby-ivar">@uri</span>] = []
  <span class="ruby-identifier">all</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">spec</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">spec_fetcher</span>.<span class="ruby-identifier">specs</span>[<span class="ruby-ivar">@uri</span>] <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">name_tuple</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">spec_fetcher</span>.<span class="ruby-identifier">latest_specs</span>[<span class="ruby-ivar">@uri</span>] = []
  <span class="ruby-identifier">latest</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">spec</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">spec_fetcher</span>.<span class="ruby-identifier">latest_specs</span>[<span class="ruby-ivar">@uri</span>] <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">name_tuple</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">spec_fetcher</span>.<span class="ruby-identifier">prerelease_specs</span>[<span class="ruby-ivar">@uri</span>] = []
  <span class="ruby-identifier">prerelease</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">spec</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">spec_fetcher</span>.<span class="ruby-identifier">prerelease_specs</span>[<span class="ruby-ivar">@uri</span>] <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">name_tuple</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment"># HACK for test_download_to_cache</span>
  <span class="ruby-keyword">unless</span> <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">RemoteFetcher</span> <span class="ruby-operator">===</span> <span class="ruby-ivar">@fetcher</span>
    <span class="ruby-identifier">v</span> = <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">marshal_version</span>

    <span class="ruby-identifier">specs</span> = <span class="ruby-identifier">all</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">spec</span><span class="ruby-operator">|</span> <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">name_tuple</span> }
    <span class="ruby-identifier">s_zip</span> = <span class="ruby-identifier">util_gzip</span> <span class="ruby-constant">Marshal</span>.<span class="ruby-identifier">dump</span> <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">NameTuple</span>.<span class="ruby-identifier">to_basic</span> <span class="ruby-identifier">specs</span>

    <span class="ruby-identifier">latest_specs</span> = <span class="ruby-identifier">latest</span>.<span class="ruby-identifier">map</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">spec</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">name_tuple</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">l_zip</span> = <span class="ruby-identifier">util_gzip</span> <span class="ruby-constant">Marshal</span>.<span class="ruby-identifier">dump</span> <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">NameTuple</span>.<span class="ruby-identifier">to_basic</span> <span class="ruby-identifier">latest_specs</span>

    <span class="ruby-identifier">prerelease_specs</span> = <span class="ruby-identifier">prerelease</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">spec</span><span class="ruby-operator">|</span> <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">name_tuple</span> }
    <span class="ruby-identifier">p_zip</span> = <span class="ruby-identifier">util_gzip</span> <span class="ruby-constant">Marshal</span>.<span class="ruby-identifier">dump</span> <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">NameTuple</span>.<span class="ruby-identifier">to_basic</span> <span class="ruby-identifier">prerelease_specs</span>

    <span class="ruby-ivar">@fetcher</span>.<span class="ruby-identifier">data</span>[<span class="ruby-node">&quot;#{@gem_repo}specs.#{v}.gz&quot;</span>]            = <span class="ruby-identifier">s_zip</span>
    <span class="ruby-ivar">@fetcher</span>.<span class="ruby-identifier">data</span>[<span class="ruby-node">&quot;#{@gem_repo}latest_specs.#{v}.gz&quot;</span>]     = <span class="ruby-identifier">l_zip</span>
    <span class="ruby-ivar">@fetcher</span>.<span class="ruby-identifier">data</span>[<span class="ruby-node">&quot;#{@gem_repo}prerelease_specs.#{v}.gz&quot;</span>] = <span class="ruby-identifier">p_zip</span>

    <span class="ruby-identifier">v</span> = <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">marshal_version</span>

    <span class="ruby-identifier">all_specs</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">spec</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">path</span> = <span class="ruby-node">&quot;#{@gem_repo}quick/Marshal.#{v}/#{spec.original_name}.gemspec.rz&quot;</span>
      <span class="ruby-identifier">data</span> = <span class="ruby-constant">Marshal</span>.<span class="ruby-identifier">dump</span> <span class="ruby-identifier">spec</span>
      <span class="ruby-identifier">data_deflate</span> = <span class="ruby-constant">Zlib</span><span class="ruby-operator">::</span><span class="ruby-constant">Deflate</span>.<span class="ruby-identifier">deflate</span> <span class="ruby-identifier">data</span>
      <span class="ruby-ivar">@fetcher</span>.<span class="ruby-identifier">data</span>[<span class="ruby-identifier">path</span>] = <span class="ruby-identifier">data_deflate</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">nil</span> <span class="ruby-comment"># force errors</span>
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- util_setup_spec_fetcher-source -->
            
          </div>

          

          
        </div><!-- util_setup_spec_fetcher-method -->
      
        <div id="util_spec-method" class="method-detail ">
          <a name="method-i-util_spec"></a>

          
          <div class="method-heading">
            <span class="method-name">util_spec</span><span
              class="method-args">(name, version = 2, deps = nil, *files)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            <p>Creates a spec with <code>name</code>, <code>version</code>.  <code>deps</code> can specify the dependency or a <code>block</code> can be given for full customization of the specification.</p>
            

            
            <div class="method-source-code" id="util_spec-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rubygems/test_case.rb, line 810</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">util_spec</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">version</span> = <span class="ruby-value">2</span>, <span class="ruby-identifier">deps</span> = <span class="ruby-keyword">nil</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">files</span>) <span class="ruby-comment"># :yields: specification</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-string">&quot;deps or block, not both&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">deps</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">block_given?</span>

  <span class="ruby-identifier">spec</span> = <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">Specification</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">s</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">s</span>.<span class="ruby-identifier">platform</span>    = <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">Platform</span><span class="ruby-operator">::</span><span class="ruby-constant">RUBY</span>
    <span class="ruby-identifier">s</span>.<span class="ruby-identifier">name</span>        = <span class="ruby-identifier">name</span>
    <span class="ruby-identifier">s</span>.<span class="ruby-identifier">version</span>     = <span class="ruby-identifier">version</span>
    <span class="ruby-identifier">s</span>.<span class="ruby-identifier">author</span>      = <span class="ruby-string">&#39;A User&#39;</span>
    <span class="ruby-identifier">s</span>.<span class="ruby-identifier">email</span>       = <span class="ruby-string">&#39;example@example.com&#39;</span>
    <span class="ruby-identifier">s</span>.<span class="ruby-identifier">homepage</span>    = <span class="ruby-string">&#39;http://example.com&#39;</span>
    <span class="ruby-identifier">s</span>.<span class="ruby-identifier">summary</span>     = <span class="ruby-string">&quot;this is a summary&quot;</span>
    <span class="ruby-identifier">s</span>.<span class="ruby-identifier">description</span> = <span class="ruby-string">&quot;This is a test description&quot;</span>

    <span class="ruby-identifier">s</span>.<span class="ruby-identifier">files</span>.<span class="ruby-identifier">push</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">files</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">files</span>.<span class="ruby-identifier">empty?</span>

    <span class="ruby-keyword">yield</span> <span class="ruby-identifier">s</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">block_given?</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">deps</span>
    <span class="ruby-comment"># Since Hash#each is unordered in 1.8, sort the keys and iterate that</span>
    <span class="ruby-comment"># way so the tests are deterministic on all implementations.</span>
    <span class="ruby-identifier">deps</span>.<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">sort</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">n</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">add_dependency</span> <span class="ruby-identifier">n</span>, (<span class="ruby-identifier">deps</span>[<span class="ruby-identifier">n</span>] <span class="ruby-operator">||</span> <span class="ruby-string">&#39;&gt;= 0&#39;</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">files</span>.<span class="ruby-identifier">empty?</span>
    <span class="ruby-identifier">write_file</span> <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">spec_file</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">io</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">io</span>.<span class="ruby-identifier">write</span> <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">to_ruby_for_cache</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">util_build_gem</span> <span class="ruby-identifier">spec</span>

    <span class="ruby-identifier">cache_file</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span> <span class="ruby-ivar">@tempdir</span>, <span class="ruby-string">&#39;gems&#39;</span>, <span class="ruby-node">&quot;#{spec.full_name}.gem&quot;</span>
    <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">mkdir_p</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span> <span class="ruby-identifier">cache_file</span>
    <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">mv</span> <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">cache_file</span>, <span class="ruby-identifier">cache_file</span>
    <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">rm</span> <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">spec_file</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">return</span> <span class="ruby-identifier">spec</span>
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- util_spec-source -->
            
          </div>

          

          
        </div><!-- util_spec-method -->
      
        <div id="util_zip-method" class="method-detail ">
          <a name="method-i-util_zip"></a>

          
          <div class="method-heading">
            <span class="method-name">util_zip</span><span
              class="method-args">(data)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            <p>Deflates <code>data</code></p>
            

            
            <div class="method-source-code" id="util_zip-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rubygems/test_case.rb, line 1066</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">util_zip</span>(<span class="ruby-identifier">data</span>)
  <span class="ruby-constant">Zlib</span><span class="ruby-operator">::</span><span class="ruby-constant">Deflate</span>.<span class="ruby-identifier">deflate</span> <span class="ruby-identifier">data</span>
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- util_zip-source -->
            
          </div>

          

          
        </div><!-- util_zip-method -->
      
        <div id="vc_windows-3F-method" class="method-detail ">
          <a name="method-i-vc_windows-3F"></a>

          
          <div class="method-heading">
            <span class="method-name">vc_windows?</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            <p>Returns whether or not we&#39;re on a version of Ruby built with VC++ (or Borland) versus Cygwin, Mingw, etc.</p>
            

            
            <div class="method-source-code" id="vc_windows-3F-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rubygems/test_case.rb, line 1156</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">vc_windows?</span>
  <span class="ruby-constant">RUBY_PLATFORM</span>.<span class="ruby-identifier">match</span>(<span class="ruby-string">&#39;mswin&#39;</span>)
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- vc_windows-3F-source -->
            
          </div>

          

          
        </div><!-- vc_windows-3F-method -->
      
        <div id="vendordir-method" class="method-detail ">
          <a name="method-i-vendordir"></a>

          
          <div class="method-heading">
            <span class="method-name">vendordir</span><span
              class="method-args">(value)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            <p>Sets the vendordir entry in RbConfig::CONFIG to <code>value</code> and restores the original value when the block ends</p>
            

            
            <div class="method-source-code" id="vendordir-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rubygems/test_case.rb, line 151</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">vendordir</span>(<span class="ruby-identifier">value</span>)
  <span class="ruby-identifier">vendordir</span> = <span class="ruby-constant">RbConfig</span><span class="ruby-operator">::</span><span class="ruby-constant">CONFIG</span>[<span class="ruby-string">&#39;vendordir&#39;</span>]

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">value</span>
    <span class="ruby-constant">RbConfig</span><span class="ruby-operator">::</span><span class="ruby-constant">CONFIG</span>[<span class="ruby-string">&#39;vendordir&#39;</span>] = <span class="ruby-identifier">value</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-constant">RbConfig</span><span class="ruby-operator">::</span><span class="ruby-constant">CONFIG</span>.<span class="ruby-identifier">delete</span> <span class="ruby-string">&#39;vendordir&#39;</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">yield</span>
<span class="ruby-keyword">ensure</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">vendordir</span>
    <span class="ruby-constant">RbConfig</span><span class="ruby-operator">::</span><span class="ruby-constant">CONFIG</span>[<span class="ruby-string">&#39;vendordir&#39;</span>] = <span class="ruby-identifier">vendordir</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-constant">RbConfig</span><span class="ruby-operator">::</span><span class="ruby-constant">CONFIG</span>.<span class="ruby-identifier">delete</span> <span class="ruby-string">&#39;vendordir&#39;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- vendordir-source -->
            
          </div>

          

          
        </div><!-- vendordir-method -->
      
        <div id="wait_for_child_process_to_exit-method" class="method-detail ">
          <a name="method-i-wait_for_child_process_to_exit"></a>

          
          <div class="method-heading">
            <span class="method-name">wait_for_child_process_to_exit</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            <p>In case we&#39;re building docs in a background process, this method waits for that process to exit (or if it&#39;s already been reaped, or never happened, swallows the Errno::ECHILD error).</p>
            

            
            <div class="method-source-code" id="wait_for_child_process_to_exit-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rubygems/test_case.rb, line 1188</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">wait_for_child_process_to_exit</span>
  <span class="ruby-constant">Process</span>.<span class="ruby-identifier">wait</span> <span class="ruby-keyword">if</span> <span class="ruby-constant">Process</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:fork</span>)
<span class="ruby-keyword">rescue</span> <span class="ruby-constant">Errno</span><span class="ruby-operator">::</span><span class="ruby-constant">ECHILD</span>
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- wait_for_child_process_to_exit-source -->
            
          </div>

          

          
        </div><!-- wait_for_child_process_to_exit-method -->
      
        <div id="win_platform-3F-method" class="method-detail ">
          <a name="method-i-win_platform-3F"></a>

          
          <div class="method-heading">
            <span class="method-name">win_platform?</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            <p>Is this test being run on a Windows platform?</p>
            

            
            <div class="method-source-code" id="win_platform-3F-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rubygems/test_case.rb, line 1126</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">win_platform?</span>
  <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">win_platform?</span>
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- win_platform-3F-source -->
            
          </div>

          

          
        </div><!-- win_platform-3F-method -->
      
        <div id="with_clean_path_to_ruby-method" class="method-detail ">
          <a name="method-i-with_clean_path_to_ruby"></a>

          
          <div class="method-heading">
            <span class="method-name">with_clean_path_to_ruby</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            
            

            
            <div class="method-source-code" id="with_clean_path_to_ruby-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rubygems/test_case.rb, line 1257</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">with_clean_path_to_ruby</span>
  <span class="ruby-identifier">orig_ruby</span> = <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">ruby</span>

  <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">instance_variable_set</span> <span class="ruby-value">:@ruby</span>, <span class="ruby-keyword">nil</span>

  <span class="ruby-keyword">yield</span>
<span class="ruby-keyword">ensure</span>
  <span class="ruby-constant">Gem</span>.<span class="ruby-identifier">instance_variable_set</span> <span class="ruby-value">:@ruby</span>, <span class="ruby-identifier">orig_ruby</span>
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- with_clean_path_to_ruby-source -->
            
          </div>

          

          
        </div><!-- with_clean_path_to_ruby-method -->
      
        <div id="write_file-method" class="method-detail ">
          <a name="method-i-write_file"></a>

          
          <div class="method-heading">
            <span class="method-name">write_file</span><span
              class="method-args">(path)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            <p>Writes a binary file to <code>path</code> which is relative to +@gemhome+</p>
            

            
            <div class="method-source-code" id="write_file-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rubygems/test_case.rb, line 635</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">write_file</span>(<span class="ruby-identifier">path</span>)
  <span class="ruby-identifier">path</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span> <span class="ruby-ivar">@gemhome</span>, <span class="ruby-identifier">path</span> <span class="ruby-keyword">unless</span> <span class="ruby-constant">Pathname</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">path</span>).<span class="ruby-identifier">absolute?</span>
  <span class="ruby-identifier">dir</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span> <span class="ruby-identifier">path</span>
  <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">mkdir_p</span> <span class="ruby-identifier">dir</span> <span class="ruby-keyword">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">directory?</span> <span class="ruby-identifier">dir</span>

  <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span> <span class="ruby-identifier">path</span>, <span class="ruby-string">&#39;wb&#39;</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">io</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">yield</span> <span class="ruby-identifier">io</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">block_given?</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">path</span>
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- write_file-source -->
            
          </div>

          

          
        </div><!-- write_file-method -->
      
      </div><!-- public-instance-method-details -->
    
    </div><!-- 5Buntitled-5D -->
  
  <div id='tx_TestCase_versioned' class='associated_wrapper'></div><script type='text/javascript'>$("#tx_TestCase_versioned").load("/associated/2.7.4/TestCase.ihtml");</script> <div id='tx_TestCase' class='associated_wrapper'></div><script type='text/javascript'>$("#tx_TestCase").load("/associated/TestCase.ihtml");</script> 
      
  </div><!-- documentation -->
  <div id='dynamic'>
  </div>
      
<div class='grids wrapper' id="footer">
  <p><small>This page was generated for Ruby 2.7.4</small></p> 
  
   <p><a href="http://ruby-doc.org">Ruby-doc.org</a> is provided by <a href="http://jamesbritt.com">James Britt</a> and <a href="http://neurogami.com">Neurogami</a>. <a href="http://neurogami.com">Maximum R+D</a>.  <div class='oio-inline'><ins data-revive-zoneid="1" data-revive-id="58924a5717c091dfee6dda3f7d38c4d7"></ins><script async src="//ras.ruby-doc.org/vvv/delivery/thesinkjs.php"></script></div></p>
 
       <p><small>Generated with Ruby-doc Rdoc Generator 0.42.0</small>.</p>
  </div>
</div>
  
 <script type='text/javascript'>
$(document).ready(function() {
      $.ajaxSetup({ cache: false });
      $("#vulns-alert").load("/associated/vulns.ihtml");
    });

    </script>


 
		<script type='text/javascript'>

	function loadPlus(plusdocs){
			$(plusdocs).find("div[class='associated_wrapper']").each (function() {
					$("#" + this.id).append($(plusdocs).find("#" + this.id ));
					});
	} 

   //function loadInline(json){
   // for (var lookFor in json) {
    //  $(lookFor).after(json[lookFor]);
    // }
  // } // end loadInline


$(document).ready(function() {
		$.ajaxSetup({ cache: false });
			$.get('/associated/2.7.4/plus_TestCase.ihtml', 
			function(plusdocs) {
			setTimeout(function() {
				loadPlus(plusdocs);
				}, 2000);
			}
			);


//     $.ajax({
//     dataType: "json",
//      url: '/associated/2.7.4/inline_TestCase.js',
//      success: function(json) {
// 			setTimeout(function() {
// 				loadInline(json);
// 				}, 2000);
// 			}
//    });

		});
</script>
		
</body>
</html>


